(this["webpackJsonpvisual-scripting"]=this["webpackJsonpvisual-scripting"]||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(33),l=n.n(r),i=(n(75),n(76),n(77),n(28)),c=n(70),u=n(14),s=n(1),d=n(2),f=n(6),h=n(4),m=n(5),v=n(12),p=n(21),b=n(24),g=n(17),y=n.n(g),w=n(22),S=n(65),N=n(66);Array.prototype.indexOfWhen=function(e){for(var t=0;t<this.length;){if(e(this[t]))return t;t++}};var x,O,C,E,j,I,k,T,V,M,F,D,B,R,L,P,A,G,W=new(function(){function e(){Object(s.a)(this,e),this.currentScriplet=void 0}return Object(d.a)(e,[{key:"selectScriplet",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentScriplet||this.currentScriplet.id!==t){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,Xe.getScriplet(t).then((function(e){return n.currentScriplet=e,!0})).catch((function(e){return console.error("Something went wrong when getting the scriplet of id '".concat(t,"'. Error: ").concat(e)),!1}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),H=new(function(){function e(){Object(s.a)(this,e)}return Object(d.a)(e,[{key:"getInputSlot",value:function(e,t){var n,a=W.currentScriplet;if(a){var o=a.getNode(e);if(o){var r=null===(n=o.schema)||void 0===n?void 0:n.inputSlots.find((function(e){return e.id===t}));if(r)return r;console.error("The input slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}},{key:"getInputSlots",value:function(e){var t,n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),[];var a=n.getNode(e);if(!a)return console.error("The node item of id '".concat(e,"' could not be found.")),[];var o=null===(t=a.schema)||void 0===t?void 0:t.inputSlots;return o||(console.error("The schema of node item '".concat(e,"' could not be found.")),[])}},{key:"getInputConnections",value:function(e){var t=W.currentScriplet;if(!t)return console.error("The current scriplet could not be found."),[];var n=t.getNode(e);return n?n.inputSlots:(console.error("The node item of id '".concat(e,"' could not be found.")),[])}},{key:"getOutputSlot",value:function(e,t){var n,a=W.currentScriplet;if(a){var o=a.getNode(e);if(o){var r=null===(n=o.schema)||void 0===n?void 0:n.outputSlots.find((function(e){return e.id===t}));if(r)return r;console.error("The input slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}},{key:"getOutputSlots",value:function(e){var t,n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),[];var a=n.getNode(e);if(!a)return console.error("The node item of id '".concat(e,"' could not be found.")),[];var o=null===(t=a.schema)||void 0===t?void 0:t.outputSlots;return o||(console.error("The schema of node item '".concat(e,"' could not be found.")),[])}},{key:"getOutputConnections",value:function(e){var t=W.currentScriplet;if(!t)return console.error("The current scriplet could not be found."),new Map;var n=t.getNode(e);return n?n.outputSlots:(console.error("The node item of id '".concat(e,"' could not be found.")),new Map)}},{key:"addConnection",value:function(e,t,n,a){var o,r;if(e!==n){var l=W.currentScriplet;if(l){var i=l.getNode(e);if(i){var c=null===(o=i.schema)||void 0===o?void 0:o.inputSlots.find((function(e){return e.id===t}));if(c){var u=l.getNode(n);if(u){var s=null===(r=u.schema)||void 0===r?void 0:r.outputSlots.find((function(e){return e.id===a}));if(s){if(c.isCorrectType(s.type)&&c.isConnectable){var d=i.getInputConnection(c.id);d&&this.deleteConnection(e,t,d.itemId,d.slotId),i.setInputConnection(c.id,n,a),u.setOutputConnection(s.id,e,t),l.updateNodes()}}else console.error("The output slot of id '".concat(a,"' from node item '").concat(n,"' could not be found."))}else console.error("The node item of id '".concat(n,"' could not be found."))}else console.error("The input slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}else console.error("When adding connections, the input item id cannot be the same as the output item id.")}},{key:"deleteConnection",value:function(e,t,n,a){var o,r,l=W.currentScriplet;if(l){var i=l.getNode(e);if(i)if(null===(o=i.schema)||void 0===o?void 0:o.inputSlots.find((function(e){return e.id===t}))){var c=l.getNode(n);if(c)(null===(r=c.schema)||void 0===r?void 0:r.outputSlots.find((function(e){return e.id===a})))?(i.deleteInputConnection(t),c.deleteOutputConnection(a,e,t),l.updateNodes()):console.error("The input slot of id '".concat(a,"' from node item '").concat(n,"' could not be found."));else console.error("The node item of id '".concat(n,"' could not be found."))}else console.error("The input slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."));else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}},{key:"checkGraphCycleExists",value:function(e,t){var n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),!0;var a=n.getNode(t);if(!a)return console.error("The node item of id '".concat(t,"' could not be found.")),!0;if(a.inputSlots.length<=0)return!1;if(a.inputSlots.some((function(t){return t.itemId===e})))return!0;for(var o=!1,r=0;r<a.inputSlots.length;r++){var l=a.inputSlots[r];if(l){var i=l.itemId;if(o=this.checkGraphCycleExists(e,i))break}}return o}},{key:"getInputFlowSlot",value:function(e,t){var n,a=W.currentScriplet;if(a){var o=a.getNode(e);if(o){var r=null===(n=o.schema)||void 0===n?void 0:n.inputFlowSlots.find((function(e){return e.id===t}));if(r)return r;console.error("The input flow slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}},{key:"getInputFlowSlots",value:function(e){var t,n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),[];var a=n.getNode(e);if(!a)return console.error("The node item of id '".concat(e,"' could not be found.")),[];var o=null===(t=a.schema)||void 0===t?void 0:t.inputFlowSlots;return o||(console.error("The schema of node item '".concat(e,"' could not be found.")),[])}},{key:"getInputFlowConnections",value:function(e){var t=W.currentScriplet;if(!t)return console.error("The current scriplet could not be found."),[];var n=t.getNode(e);return n?n.inputFlowSlots:(console.error("The node item of id '".concat(e,"' could not be found.")),[])}},{key:"getOutputFlowSlot",value:function(e,t){var n,a=W.currentScriplet;if(a){var o=a.getNode(e);if(o){var r=null===(n=o.schema)||void 0===n?void 0:n.outputFlowSlots.find((function(e){return e.id===t}));if(r)return r;console.error("The input flow slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}},{key:"getOutputFlowSlots",value:function(e){var t,n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),[];var a=n.getNode(e);if(!a)return console.error("The node item of id '".concat(e,"' could not be found.")),[];var o=null===(t=a.schema)||void 0===t?void 0:t.outputFlowSlots;return o||(console.error("The schema of node item '".concat(e,"' could not be found.")),[])}},{key:"getOutputFlowConnections",value:function(e){var t=W.currentScriplet;if(!t)return console.error("The current scriplet could not be found."),[];var n=t.getNode(e);return n?n.outputFlowSlots:(console.error("The node item of id '".concat(e,"' could not be found.")),[])}},{key:"addFlowConnection",value:function(e,t,n,a){var o,r;if(e!==n){var l=W.currentScriplet;if(l){var i=l.getNode(e);if(i){var c=null===(o=i.schema)||void 0===o?void 0:o.inputFlowSlots.find((function(e){return e.id===t}));if(c){var u=l.getNode(n);if(u){var s=null===(r=u.schema)||void 0===r?void 0:r.outputFlowSlots.find((function(e){return e.id===a}));if(s){if(c.isConnectable){var d=i.getInputFlowConnection(t);d&&this.deleteFlowConnection(e,t,d.itemId,d.slotId),i.setInputFlowConnection(c.id,n,a);var f=u.getOutputFlowConnection(a);f&&this.deleteFlowConnection(f.itemId,f.slotId,n,a),u.setOutputFlowConnection(s.id,e,t),l.updateNodes()}}else console.error("The input flow slot of id '".concat(a,"' from node item '").concat(n,"' could not be found."))}else console.error("The node item of id '".concat(n,"' could not be found."))}else console.error("The input flow slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}else console.error("When adding connections, the input item id cannot be the same as the output item id.")}},{key:"deleteFlowConnection",value:function(e,t,n,a){var o,r,l=W.currentScriplet;if(l){var i=l.getNode(e);if(i)if(null===(o=i.schema)||void 0===o?void 0:o.inputFlowSlots.find((function(e){return e.id===t}))){var c=l.getNode(n);if(c)(null===(r=c.schema)||void 0===r?void 0:r.outputFlowSlots.find((function(e){return e.id===a})))?(i.deleteInputFlowConnection(t),c.deleteOutputFlowConnection(a),l.updateNodes()):console.error("The input flow slot of id '".concat(a,"' from node item '").concat(n,"' could not be found."));else console.error("The node item of id '".concat(n,"' could not be found."))}else console.error("The input flow slot of id '".concat(t,"' from node item '").concat(e,"' could not be found."));else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}},{key:"checkFlowGraphCycleExists",value:function(e,t){var n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),!0;var a=n.getNode(t);if(!a)return console.error("The node item of id '".concat(t,"' could not be found.")),!0;if(a.inputFlowSlots.length<=0)return!1;if(a.inputFlowSlots.some((function(t){return t.itemId===e})))return!0;for(var o=!1,r=0;r<a.inputFlowSlots.length;r++){var l=a.inputFlowSlots[r];if(l){var i=l.itemId;if(o=this.checkGraphCycleExists(e,i))break}}return o}},{key:"deleteAllConnections",value:function(e){var t=this,n=W.currentScriplet;if(!n)return console.error("The current scriplet could not be found."),!1;var a=n.getNode(e);return a?(a.outputSlots.forEach((function(n){n.forEach((function(n){t.deleteConnection(n.itemId,n.slotId,e,n.id)}))})),a.inputSlots.forEach((function(n){n&&t.deleteConnection(e,n.id,n.itemId,n.slotId)})),a.inputFlowSlots.forEach((function(n){n&&t.deleteFlowConnection(e,n.id,n.itemId,n.slotId)})),a.outputFlowSlots.forEach((function(n){n&&t.deleteFlowConnection(n.itemId,n.slotId,e,n.id)})),!0):(console.error("The node item of id '".concat(e,"' could not be found.")),!1)}}]),e}()),q=function e(t,n){Object(s.a)(this,e),this.id=void 0,this.name=void 0,this.id=t,this.name=n},z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e,a,o){var r;return Object(s.a)(this,n),(r=t.call(this,e,o)).type=void 0,r.type=a,r}return Object(d.a)(n,[{key:"isCorrectType",value:function(e){return this.type===e}}]),n}(q),K=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e,a,o,r,l,i){var c;return Object(s.a)(this,n),(c=t.call(this,e,a,r)).defaultValue=void 0,c.isConnectable=void 0,c.isEditable=void 0,c.defaultValue=o,c.isConnectable=null===l||void 0===l||l,c.isEditable=null===i||void 0===i||i,c}return Object(d.a)(n,[{key:"getValue",value:function(e){var t,n=W.currentScriplet;if(n){var a=n.getNode(e);if(a){var o=a.getInputConnection(this.id);if(!o)return null!==(t=a.getInputValue(this.id))&&void 0!==t?t:this.defaultValue;var r,l=H.getOutputSlot(o.itemId,o.slotId);return l?l.evaluate():(console.error("The output slot '".concat(o.slotId,"' of node item '").concat(o.itemId,"' could not be found.")),null!==(r=a.getInputValue(this.id))&&void 0!==r?r:this.defaultValue)}console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}}]),n}(z),X=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e,a,o,r){var l;return Object(s.a)(this,n),(l=t.call(this,e,a,r)).evaluate=void 0,l.evaluate=o,l}return n}(z),U=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(q),Z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e,a,o,r){var l;return Object(s.a)(this,n),(l=t.call(this,e,r)).isConnectable=void 0,l.evaluate=void 0,l.returnToSlot=void 0,l.evaluate=a,l.isConnectable=null===o||void 0===o||o,l}return Object(d.a)(n,[{key:"evaluateSlot",value:function(e){this.evaluate(this,e)}}]),n}(U),Q=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"goNext",value:function(e,t){var n=W.currentScriplet;if(n){var a=n.getNode(e);if(a){var o=a.getOutputFlowConnection(this.id);if(o){var r=H.getInputFlowSlot(o.itemId,o.slotId);return r?void r.evaluateSlot(t):void console.error("The input flow slot '".concat(o.slotId,"' of node item '").concat(o.itemId,"' could not be found."))}if(t){var l=H.getInputFlowSlot(t.itemId,t.slotId);return l?void l.evaluateSlot():void console.error("The input flow slot '".concat(t.slotId,"' of node item '").concat(t.itemId,"' could not be found."))}}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}}]),n}(U),Y=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"getValue",value:function(e){var t,n=W.currentScriplet;if(n){var a=n.getNode(e);if(a){var o=a.variableId;if(null!=o){var r=n.getVariable(o);if(r)return null!==(t=r.value)&&void 0!==t?t:r.startValue;console.error("The variable of id '".concat(o,"' could not be found."))}else console.error("The variable id in node item '".concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}}]),n}(K);var $=function(e){return e}(x=function(e){return e}(x=function(e){return e}((C=O=function(){function e(t){Object(s.a)(this,e),this.value=void 0,this.value=t}return Object(d.a)(e,null,[{key:"convertFromString",value:function(e){var t="^(-[1-9][0-9]*)|([0-9]+)$";if(e.match(t))return parseInt(e);console.error("The input doesn't match the regex '".concat(t,"'."))}},{key:"convertToString",value:function(e){return"".concat(e)}}]),e}(),O.className="Number",O.defaultValue=0,x=C))||x)||x)||x,_=(function(e){}(E=function(e){return e}(E=function(e){return e}((I=j=function(){function e(t){Object(s.a)(this,e),this.value=void 0,this.value=t}return Object(d.a)(e,null,[{key:"convertFromString",value:function(e){return e}},{key:"convertToString",value:function(e){return e}}]),e}(),j.className="String",j.defaultValue="",E=I))||E)||E),function(e){return e}(k=function(e){return e}(k=function(e){return e}((V=T=function(){function e(t){Object(s.a)(this,e),this.value=void 0,this.value=t}return Object(d.a)(e,null,[{key:"convertFromString",value:function(e){return"true"===e}},{key:"convertToString",value:function(e){return"".concat(e)}}]),e}(),T.className="Boolean",T.defaultValue=!0,k=V))||k)||k)||k),J=function(e){return e}(M=function(e){return e}(M=function(e){return e}((D=F=function(){function e(t){Object(s.a)(this,e),this.value=void 0,this.value=t}return Object(d.a)(e,null,[{key:"convertFromString",value:function(e){if(e.match("^([0-9]+)$"))return parseInt(e);console.error("The input doesn't match the regex '".concat("^([0-9]+)$","'."))}},{key:"convertToString",value:function(e){return"".concat(e)}}]),e}(),F.className="Flow",F.defaultValue=-1,M=D))||M)||M)||M,ee=function(e){return e}(B=function(e){return e}((L=R=function e(t){Object(s.a)(this,e),this.value=void 0,this.value=t},R.className="Variable",R.defaultValue=-1,B=L))||B)||B,te=(function(e){}(P=function(e){return e}((G=A=function e(t){Object(s.a)(this,e),this.value=void 0,this.value=t},A.className="Any",A.defaultValue=void 0,P=G))||P),n(27)),ne=new(function(){function e(){Object(s.a)(this,e),this.nodeSchemas=void 0,this.nodeSchemas=new Map}return Object(d.a)(e,[{key:"getNewSchema",value:function(e,t){var n=this.nodeSchemas.get(t);if(!n)throw new Error("The schema '".concat(t,"' could not be found."));return n.createNew(e)}},{key:"getBaseSchema",value:function(e){var t=this.nodeSchemas.get(e);if(!t)throw new Error("The schema '".concat(e,"' could not be found."));return t}},{key:"getBaseSchemas",value:function(){return Object(te.a)(this.nodeSchemas.values())}}]),e}()),ae=function e(){Object(s.a)(this,e)};ae.Gray={100:"#f7fafc",200:"#edf2f7",300:"#e2e8f0",400:"#cbd5e0",500:"#a0aec0",600:"#718096",700:"#4a5568",800:"#2d3748",900:"#1a202c"},ae.Red={100:"#fff5f5",200:"#fed7d7",300:"#feb2b2",400:"#fc8181",500:"#f56565",600:"#e53e3e",700:"#c53030",800:"#9b2c2c",900:"#742a2a"},ae.Orange={100:"#fffaf0",200:"#feebc8",300:"#fbd38d",400:"#f6ad55",500:"#ed8936",600:"#dd6b20",700:"#c05621",800:"#9c4221",900:"#7b341e"},ae.Yellow={100:"#fffff0",200:"#fefcbf",300:"#faf089",400:"#f6e05e",500:"#ecc94b",600:"#d69e2e",700:"#b7791f",800:"#975a16",900:"#744210"},ae.Green={100:"#f0fff4",200:"#c6f6d5",300:"#9ae6b4",400:"#68d391",500:"#48bb78",600:"#38a169",700:"#2f855a",800:"#276749",900:"#22543d"},ae.Teal={100:"#e6fffa",200:"#b2f5ea",300:"#81e6d9",400:"#4fd1c5",500:"#38b2ac",600:"#319795",700:"#2c7a7b",800:"#285e61",900:"#234e52"},ae.Blue={100:"#ebf8ff",200:"#bee3f8",300:"#90cdf4",400:"#63b3ed",500:"#4299e1",600:"#3182ce",700:"#2b6cb0",800:"#2c5282",900:"#2a4365"},ae.Indigo={100:"#ebf4ff",200:"#c3dafe",300:"#a3bffa",400:"#7f9cf5",500:"#667eea",600:"#5a67d8",700:"#4c51bf",800:"#434190",900:"#3c366b"},ae.Purple={100:"#faf5ff",200:"#e9d8fd",300:"#d6bcfa",400:"#b794f4",500:"#9f7aea",600:"#805ad5",700:"#6b46c1",800:"#553c9a",900:"#44337a"},ae.Pink={100:"#fff5f7",200:"#fed7e2",300:"#fbb6ce",400:"#f687b3",500:"#ed64a6",600:"#d53f8c",700:"#b83280",800:"#97266d",900:"#702459"};var oe,re,le,ie,ce,ue,se,de,fe,he,me,ve,pe,be,ge,ye,we,Se,Ne,xe,Oe,Ce,Ee,je,Ie,ke,Te,Ve,Me,Fe,De,Be,Re,Le,Pe,Ae=n(67),Ge=new(function(){function e(){Object(s.a)(this,e),this.onMessage=new Ae.SimpleEventDispatcher}return Object(d.a)(e,[{key:"subscribe",value:function(e){this.onMessage.subscribe(e)}},{key:"log",value:function(e){this.onMessage.dispatch({message:e,color:ae.Gray[100]})}},{key:"error",value:function(e){this.onMessage.dispatch({message:e,color:ae.Red[500]})}},{key:"success",value:function(e){this.onMessage.dispatch({message:e,color:ae.Green[400]})}}]),e}());function We(e){var t=e;function n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Object(N.a)(e,n)}var a=function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return n.apply(void 0,[t].concat(a))};a.prototype=t.prototype;var o=a();ne.nodeSchemas.set(o.id,o.createNew(-1))}!function(e){e.Start="Hidden/Start",e.IfElse="Base/ControlFlow/IfElse",e.ForLoop="Base/ControlFlow/ForLoop",e.ForLoopBreak="Base/ControlFlow/ForLoopBreak",e.WhileLoop="Base/ControlFlow/WhileLoop",e.Input="Hidden/Input",e.Output="Hidden/Output",e.PrintNumber="Base/Debug/PrintNumber",e.PrintBoolean="Base/Debug/PrintBoolean",e.InputNumber="Base/InputNumber",e.AddNumbers="Base/Math/Number/Add",e.SubtractNumbers="Base/Math/Number/Subtract",e.MultiplyNumbers="Base/Math/Number/Multiply",e.DivideNumbers="Base/Math/Number/Divide",e.ModuloNumbers="Base/Math/Number/Modulo",e.PowNumbers="Base/Math/Number/Power",e.SqrtNumber="Base/Math/Number/SquareRoot",e.CeilNumber="Base/Math/Number/Ceiling",e.FloorNumber="Base/Math/Number/Floor",e.LessThanNumbers="Base/Math/Number/LessThan",e.LessThanEqualNumbers="Base/Math/Number/LessThanEqual",e.GreaterThanNumbers="Base/Math/Number/GreaterThan",e.GreaterThanEqualNumbers="Base/Math/Number/GreaterThanEqual",e.EqualNumbers="Base/Math/Number/Equal",e.NotEqualNumbers="Base/Math/Number/NotEqual",e.AndBoolean="Base/Math/Boolean/And",e.OrBoolean="Base/Math/Boolean/Or",e.EqualBoolean="Base/Math/Boolean/Equal",e.NotEqualBoolean="Base/Math/Boolean/NotEqual",e.NotBoolean="Base/Math/Boolean/Not",e.GetNumber="Hidden/Getter/Number",e.SetNumber="Hidden/Setter/Number",e.GetBoolean="Hidden/Getter/Boolean",e.SetBoolean="Hidden/Setter/Boolean"}(Pe||(Pe={}));var He=function(){function e(t,n,a,o,r,l,i,c){var u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],d=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];Object(s.a)(this,e),this.id=void 0,this.name=void 0,this.uniqueNamePrefix=void 0,this.width=void 0,this.inputFlowSlots=void 0,this.outputFlowSlots=void 0,this.inputSlots=void 0,this.outputSlots=void 0,this.isDeletable=void 0,this.isNameEditable=void 0,this.id=t,this.name=n,this.uniqueNamePrefix=a,this.width=o,this.inputFlowSlots=r,this.outputFlowSlots=l,this.inputSlots=i,this.outputSlots=c,this.isDeletable=u,this.isNameEditable=d}return Object(d.a)(e,[{key:"maxLength",value:function(){return Math.max(this.inputFlowSlots.length+this.inputSlots.length,this.outputFlowSlots.length+this.outputSlots.length)}},{key:"createNew",value:function(e){return this.createNewSchema(e)}}]),e}(),qe=(We(oe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.Start,o=new Q(0,"Body"),r=[o],l=[new Z(0,(function(){o.goNext(e)}),!1," ")];return t.call(this,a,"Start","start",120,l,r,[],[],!1)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(re=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.IfElse,o=new K(1,_.className,_.defaultValue,"Condition"),r=[o],l=new Q(0,"True"),i=new Q(1,"False"),c=[l,i],u=[new Z(0,(function(t,n){!0===o.getValue(e)?l.goNext(e,n):i.goNext(e,n)}),!0,"Entry")];return t.call(this,a,"If/Else","ifElse",220,u,c,r,[])}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(le=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(s.a)(this,n);var o=Pe.ForLoop,r=new Q(0,"Body"),l=new Q(1,"Exit"),i=[r,l],c=new K(1,$.className,$.defaultValue,"Start"),u=new K(2,$.className,10,"End"),d=new K(3,$.className,1,"Increment"),f=[c,u,d],h=[new X(2,$.className,(function(){var e;return a.index-(null!==(e=a.increment)&&void 0!==e?e:1)}),"Index")],m=[new Z(0,(function(t,n){var o,i;(t.returnToSlot||(t.returnToSlot=n),null==a.start||null==a.end||null==a.increment)&&(a.start=c.getValue(e),a.end=u.getValue(e),a.increment=d.getValue(e),a.index=null!==(i=a.start)&&void 0!==i?i:0);if(a.index<(null!==(o=a.end)&&void 0!==o?o:0)){var s;a.index+=null!==(s=a.increment)&&void 0!==s?s:1,r.goNext(e,{id:-1,itemId:e,slotId:t.id})}else{var f=t.returnToSlot;t.returnToSlot=void 0,a.index=0,a.start=void 0,a.end=void 0,l.goNext(e,f)}}),!0,"Entry")];return(a=t.call(this,o,"For Loop","forLoop",200,m,i,f,h)).start=void 0,a.end=void 0,a.increment=void 0,a.index=void 0,a.index=0,a}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(ie=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(s.a)(this,n);var o=Pe.ForLoopBreak,r=new Q(0,"Body"),l=new Q(1,"Exit"),i=[r,l],c=new K(2,$.className,$.defaultValue,"Start"),u=new K(3,$.className,10,"End"),d=new K(4,$.className,1,"Increment"),f=[c,u,d],h=[new X(2,$.className,(function(){var e;return a.index-(null!==(e=a.increment)&&void 0!==e?e:1)}),"Index")],m=[new Z(0,(function(t,n){var o,i;(t.returnToSlot||(t.returnToSlot=n),null==a.start||null==a.end||null==a.increment)&&(a.start=c.getValue(e),a.end=u.getValue(e),a.increment=d.getValue(e),a.index=null!==(i=a.start)&&void 0!==i?i:0);if(a.index<(null!==(o=a.end)&&void 0!==o?o:0)){var s;a.index+=null!==(s=a.increment)&&void 0!==s?s:1,r.goNext(e,{id:-1,itemId:e,slotId:t.id})}else{var f=t.returnToSlot;t.returnToSlot=void 0,a.index=0,a.start=void 0,a.end=void 0,l.goNext(e,f)}}),!0,"Entry"),new Z(1,(function(t,n){var o=t.returnToSlot;t.returnToSlot=void 0,a.index=0,a.start=void 0,a.end=void 0,l.goNext(e,o)}),!0,"Break")];return(a=t.call(this,o,"For Loop Break","forLoopBreak",200,m,i,f,h)).start=void 0,a.end=void 0,a.increment=void 0,a.index=void 0,a.index=0,a}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(ce=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(s.a)(this,n);var o=Pe.WhileLoop,r=new Q(0,"Body"),l=new Q(1,"Exit"),i=[r,l],c=new K(1,_.className,_.defaultValue,"Condition"),u=new K(2,$.className,1e4,"Limit"),d=[c,u],f=[new Z(0,(function(t,n){if(t.returnToSlot||(t.returnToSlot=n),null==a.limit&&(a.limit=u.getValue(e)),null==a.limit&&console.error("The limit of while loop of id '".concat(e,"' is undefined, therefore this while loop won't run. Set it to 0 if it is intended to run forever.")),c.getValue(e)&&null!=a.limit&&a.counter<(a.limit<=0?1:a.limit))a.limit>0&&(a.counter+=1),r.goNext(e,{id:-1,itemId:e,slotId:t.id});else{var o=t.returnToSlot;t.returnToSlot=void 0,a.counter=0,a.limit=void 0,l.goNext(e,o)}}),!0,"Entry")];return(a=t.call(this,o,"While Loop","whileLoop",200,f,i,d,[])).limit=void 0,a.counter=void 0,a.counter=0,a}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(ue=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.Input,o=new Y(0,ee.className,ee.defaultValue,"Get Variable",!1,!1),r=[o],l=[new X(0,$.className,(function(){return o.getValue(e)}))];return t.call(this,a,"Input","input",180,[],[],r,l,!0,!1)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(se=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.GetNumber,o=new Y(0,ee.className,ee.defaultValue,"Get Variable",!1,!1),r=[o],l=[new X(0,$.className,(function(){return o.getValue(e)}))];return t.call(this,a,"Get Number","getNum",180,[],[],r,l,!0,!1)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(de=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.SetNumber,o=new K(1,$.className,$.defaultValue),r=[o],l=[new X(1,$.className,(function(){return o.getValue(e)}))],i=new Q(0,"Exit"),c=[i],u=[new Z(0,(function(t,n){var a=W.currentScriplet;if(a){var r=a.getNode(e);if(r){var l=r.variableId;if(null!=l){var c=a.getVariable(l);c?c.type===$.className?(c.value=o.getValue(e),a.setVariable(c),i.goNext(e,n)):console.error("Cannot set to variable '".concat(l,"' of type '").concat(c.type,"' when the needed type is '").concat($.className,"'.")):console.error("The variable of id '".concat(l,"' could not be found."))}else console.error("The variable id in node item '".concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}),!0,"Set Variable")];return t.call(this,a,"Set Number","setNum",205,u,c,r,l,!0,!1)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(fe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.GetBoolean,o=new Y(0,ee.className,ee.defaultValue,"Get Variable",!1,!1),r=[o],l=[new X(0,_.className,(function(){return o.getValue(e)}))];return t.call(this,a,"Get Boolean","getBool",180,[],[],r,l,!0,!1)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(he=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.SetBoolean,o=new K(1,_.className,_.defaultValue),r=[o],l=[new X(1,_.className,(function(){return o.getValue(e)}))],i=new Q(0,"Exit"),c=[i],u=[new Z(0,(function(t,n){var a=W.currentScriplet;if(a){var r=a.getNode(e);if(r){var l=r.variableId;if(null!=l){var c=a.getVariable(l);c?c.type===_.className?(c.value=o.getValue(e),a.setVariable(c),i.goNext(e,n)):console.error("Cannot set to variable '".concat(l,"' of type '").concat(c.type,"' when the needed type is '").concat(_.className,"'.")):console.error("The variable of id '".concat(l,"' could not be found."))}else console.error("The variable id in node item '".concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet could not be found.")}),!0,"Set Variable")];return t.call(this,a,"Set Boolean","setBoolean",205,u,c,r,l,!0,!1)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(me=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){Object(s.a)(this,n);var e=Pe.Output,a=[new K(0,$.className,$.defaultValue)];return t.call(this,e,"Output","output",120,[],[],a,[])}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n}}]),n}(He)),We(ve=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.InputNumber,o=new K(0,$.className,$.defaultValue,void 0,!1),r=[o],l=[new X(0,$.className,(function(){return o.getValue(e)}))];return t.call(this,a,"Input Number","inputNum",190,[],[],r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(pe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.PrintNumber,o=new K(1,$.className,$.defaultValue),r=[o],l=[new X(1,$.className,(function(){return o.getValue(e)}))],i=new Q(0,"Exit"),c=[i],u=[new Z(0,(function(t,n){Ge.log(o.getValue(e)),i.goNext(e,n)}),!0,"Entry")];return t.call(this,a,"Print Number","printNum",205,u,c,r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(be=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.PrintBoolean,o=new K(1,_.className,_.defaultValue),r=[o],l=[new X(1,_.className,(function(){return o.getValue(e)}))],i=new Q(0,"Exit"),c=[i],u=[new Z(0,(function(t,n){Ge.log(o.getValue(e)),i.goNext(e,n)}),!0,"Entry")];return t.call(this,a,"Print Boolean","printBool",205,u,c,r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(ge=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.AddNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,$.className,(function(){return o.getValue(e)+r.getValue(e)}),"Sum")];return t.call(this,a,"Add Numbers","addNums",200,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(ye=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.SubtractNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,$.className,(function(){return o.getValue(e)-r.getValue(e)}),"Difference")];return t.call(this,a,"Subtract Numbers","subtractNums",220,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(we=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.MultiplyNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,$.className,(function(){return o.getValue(e)*r.getValue(e)}),"Product")];return t.call(this,a,"Multiply Numbers","multiplyNums",210,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Se=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.DivideNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,1),l=[o,r],i=[new X(0,$.className,(function(){return o.getValue(e)/(r.getValue(e)||1)}),"Quotient")];return t.call(this,a,"Divide Numbers","divideNums",210,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Ne=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.ModuloNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,$.className,(function(){var t=o.getValue(e),n=r.getValue(e);return(t%n+n)%n}),"Modulo")];return t.call(this,a,"Modulo Numbers","moduloNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(xe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.PowNumbers,o=new K(0,$.className,$.defaultValue,"Base"),r=new K(1,$.className,$.defaultValue,"Exponent"),l=[o,r],i=[new X(0,$.className,(function(){return Math.pow(o.getValue(e),r.getValue(e))}),"Result")];return t.call(this,a,"Power Numbers","powNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Oe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.SqrtNumber,o=new K(0,$.className,$.defaultValue),r=[o],l=[new X(0,$.className,(function(){return Math.sqrt(o.getValue(e))}),"Sqrt")];return t.call(this,a,"Square Root Number","sqrtNum",205,[],[],r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Ce=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.CeilNumber,o=new K(0,$.className,$.defaultValue),r=[o],l=[new X(0,$.className,(function(){return Math.ceil(o.getValue(e))}),"Ceil")];return t.call(this,a,"Ceiling Number","ceilNum",205,[],[],r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Ee=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.FloorNumber,o=new K(0,$.className,$.defaultValue),r=[o],l=[new X(0,$.className,(function(){return Math.floor(o.getValue(e))}),"Floor")];return t.call(this,a,"Floor Number","floorNum",205,[],[],r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(je=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.LessThanNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)<r.getValue(e)}),"Result")];return t.call(this,a,"Less Than Numbers","lessThanNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Ie=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.LessThanEqualNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)<=r.getValue(e)}),"Result")];return t.call(this,a,"Less Than Equal Numbers","lessThanEqualNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(ke=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.GreaterThanNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)>r.getValue(e)}),"Result")];return t.call(this,a,"Greater Than Numbers","greaterThanNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Te=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.GreaterThanEqualNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)>=r.getValue(e)}),"Result")];return t.call(this,a,"Greater Than Equal Numbers","greaterThanEqualNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Ve=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.EqualNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)===r.getValue(e)}),"Result")];return t.call(this,a,"Equal Numbers","equalNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Me=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.NotEqualNumbers,o=new K(0,$.className,$.defaultValue),r=new K(1,$.className,$.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)!==r.getValue(e)}),"Result")];return t.call(this,a,"Not Equal Numbers","notEqualNums",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Fe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.AndBoolean,o=new K(0,_.className,_.defaultValue),r=new K(1,_.className,_.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)&&r.getValue(e)}),"And")];return t.call(this,a,"And Boolean","andBool",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(De=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.OrBoolean,o=new K(0,_.className,_.defaultValue),r=new K(1,_.className,_.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)||r.getValue(e)}),"Or")];return t.call(this,a,"Or Boolean","orBool",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Be=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.EqualBoolean,o=new K(0,_.className,_.defaultValue),r=new K(1,_.className,_.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)===r.getValue(e)}),"Result")];return t.call(this,a,"Equal Boolean","equalBool",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Re=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.NotEqualBoolean,o=new K(0,_.className,_.defaultValue),r=new K(1,_.className,_.defaultValue),l=[o,r],i=[new X(0,_.className,(function(){return o.getValue(e)!==r.getValue(e)}),"Result")];return t.call(this,a,"Not Equal Boolean","notEqualBool",205,[],[],l,i)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),We(Le=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){Object(s.a)(this,n);var a=Pe.NotBoolean,o=new K(0,_.className,_.defaultValue),r=[o],l=[new X(0,_.className,(function(){return!o.getValue(e)}),"Not")];return t.call(this,a,"Not Boolean","notBool",205,[],[],r,l)}return Object(d.a)(n,[{key:"createNewSchema",value:function(e){return new n(e)}}]),n}(He)),new(function(){function e(){Object(s.a)(this,e),this.typeCount=void 0,this.typeCount=new Map}return Object(d.a)(e,[{key:"getNextVariableName",value:function(e){var t=ne.getBaseSchema(e);if(t){var n=this.typeCount.get(e);return null==n?(this.typeCount.set(e,1),n=1):this.typeCount.set(e,n+1),"".concat(t.uniqueNamePrefix).concat(n)}console.error("The schema of id '".concat(e,"' could not be found."))}}]),e}())),ze=function(){function e(t,n,a,o,r,l,i,c,u,d,f){var h;if(Object(s.a)(this,e),this.id=void 0,this.customName=void 0,this.x=void 0,this.y=void 0,this.schemaId=void 0,this.inputValues=void 0,this.inputSlots=void 0,this.inputFlowSlots=void 0,this.outputSlots=void 0,this.outputFlowSlots=void 0,this.variableId=void 0,this.variableName=void 0,this.schema=void 0,this.id=t,this.x=n,this.y=a,this.schemaId=o,this.inputValues=r,this.inputSlots=l,this.inputFlowSlots=i,this.outputSlots=c,this.outputFlowSlots=u,null!=f){var m,v=null===(m=W.currentScriplet)||void 0===m?void 0:m.getVariable(f);this.customName=null===v||void 0===v?void 0:v.name,this.variableId=f}else this.customName=d;this.variableName=null!==(h=qe.getNextVariableName(o))&&void 0!==h?h:"undefined",this.schema=ne.getNewSchema(t,o),Object.defineProperties(this,{variableName:{enumerable:!1,writable:!0},schema:{enumerable:!1,writable:!0}})}return Object(d.a)(e,[{key:"getInputConnection",value:function(e){var t=this.inputSlots.filter((function(t){return t.id===e}));if(t.length>1&&console.error("Input slot '".concat(e,"' of node item '").concat(this.id,"' can only have 1 connection. Will return the first connection found.")),!(t.length<1))return t[0]}},{key:"setInputConnection",value:function(e,t,n){var a=this.inputSlots.filter((function(t){return t.id===e}));if(a.length>1&&console.error("Input slot '".concat(e,"' of node item '").concat(this.id,"' can only have 1 connection. Will replace the first connection found.")),a.length<1)this.inputSlots.push({id:e,itemId:t,slotId:n});else{var o=a[0];o.itemId=t,o.slotId=n}}},{key:"deleteInputConnection",value:function(e){this.inputSlots=this.inputSlots.filter((function(t){return t.id!==e}))}},{key:"getInputValue",value:function(e){var t=this.inputValues.filter((function(t){return t.id===e}));if(t.length>1&&console.error("Input value '".concat(e,"' of node item '").concat(this.id,"' can only have 1 value. Will return the first value found.")),!(t.length<1))return t[0].value}},{key:"setInputValue",value:function(e,t){var n=this.inputValues.filter((function(t){return t.id===e}));(n.length>1&&console.error("Input value '".concat(e,"' of node item '").concat(this.id,"' can only have 1 value. Will return the first value found.")),n.length<1)?this.inputValues.push({id:e,value:t}):n[0].value=t}},{key:"getOutputConnections",value:function(e){var t=this.outputSlots.get(e);return t||[]}},{key:"setOutputConnection",value:function(e,t,n){var a=this.outputSlots.get(e);a?a.find((function(a){return a.id===e&&a.itemId===t&&a.slotId===n}))?console.error("The connection '".concat(t,", ").concat(n,"' is already connected to node item slot '").concat(this.id,", ").concat(e,"'. Something in the code may have caused this duplication.")):a.push({id:e,itemId:t,slotId:n}):this.outputSlots.set(e,[{id:e,itemId:t,slotId:n}])}},{key:"deleteOutputConnection",value:function(e,t,n){var a=this.outputSlots.get(e);a&&(a=a.filter((function(a){return a.id!==e&&a.itemId!==t&&a.slotId!==n})),this.outputSlots.set(e,a))}},{key:"getInputFlowConnection",value:function(e){var t=this.inputFlowSlots.filter((function(t){return t.id===e}));if(t.length>1&&console.error("Input flow slot '".concat(e,"' of node item '").concat(this.id,"' can only have 1 connection. Will return the first connection found.")),!(t.length<1))return t[0]}},{key:"setInputFlowConnection",value:function(e,t,n){var a=this.inputFlowSlots.filter((function(t){return t.id===e}));if(a.length>1&&console.error("Input flow slot '".concat(e,"' of node item '").concat(this.id,"' can only have 1 connection. Will replace the first connection found.")),a.length<1)this.inputFlowSlots.push({id:e,itemId:t,slotId:n});else{var o=a[0];o.itemId=t,o.slotId=n}}},{key:"deleteInputFlowConnection",value:function(e){this.inputFlowSlots=this.inputFlowSlots.filter((function(t){return t.id!==e}))}},{key:"getOutputFlowConnection",value:function(e){var t=this.outputFlowSlots.filter((function(t){return t.id===e}));if(t.length>1&&console.error("Output flow slot '".concat(e,"' of node item '").concat(this.id,"' can only have 1 connection. Will return the first connection found.")),!(t.length<1))return t[0]}},{key:"setOutputFlowConnection",value:function(e,t,n){var a=this.outputFlowSlots.filter((function(t){return t.id===e}));if(a.length>1&&console.error("Output flow slot '".concat(e,"' of node item '").concat(this.id,"' can only have 1 connection. Will replace the first connection found.")),a.length<1)this.outputFlowSlots.push({id:e,itemId:t,slotId:n});else{var o=a[0];o.itemId=t,o.slotId=n}}},{key:"deleteOutputFlowConnection",value:function(e){this.outputFlowSlots=this.outputFlowSlots.filter((function(t){return t.id!==e}))}}]),e}(),Ke=function(){function e(t,n,a,o,r,l,i){Object(s.a)(this,e),this.id=void 0,this.name=void 0,this.start=void 0,this.items=void 0,this.itemCounter=void 0,this.variables=void 0,this.variableCounter=void 0,this.id=null!==n&&void 0!==n?n:0,this.itemCounter=null!==r&&void 0!==r?r:1,this.variableCounter=null!==i&&void 0!==i?i:1,this.name=t,this.start=null!==a&&void 0!==a?a:{id:0,x:0,y:0,schemaId:Pe.Start,inputValues:[],inputSlots:[],inputFlowSlots:[],outputSlots:new Map,outputFlowSlots:[]},null==o?(this.items=new Map,this.items.set(0,this.start)):this.items=o,this.variables=null!==l&&void 0!==l?l:new Map}return Object(d.a)(e,[{key:"addNode",value:function(e,t,n,a,o,r,l,i,c,u){this.addNodes(!1,{x:e,y:t,schemaId:n,inputValues:a,inputSlots:o,inputFlowSlots:r,outputSlots:l,outputFlowSlots:i,customName:c,variableId:u})}},{key:"addNodes",value:function(e){for(var t=this,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];a.forEach((function(e){var n=t.itemCounter++;t.items.set(n,{id:n,x:e.x,y:e.y,schemaId:e.schemaId,inputValues:e.inputValues,inputSlots:e.inputSlots,inputFlowSlots:e.inputFlowSlots,outputSlots:e.outputSlots,outputFlowSlots:e.outputFlowSlots,customName:e.customName,variableId:e.variableId})})),Xe.updateScriplet(this.id,{items:this.items,itemCounter:this.itemCounter}).then((function(t){t&&e&&window.location.reload()}))}},{key:"getStart",value:function(){if(!this.start.schema){var e=new ze(this.start.id,this.start.x,this.start.y,this.start.schemaId,this.start.inputValues,this.start.inputSlots,this.start.inputFlowSlots,this.start.outputSlots,this.start.outputFlowSlots,this.start.customName,this.start.variableId);return this.start=e,e}return this.start}},{key:"getNode",value:function(e){var t=this.items.get(e);if(t)return this.convertToNodeItem(t)}},{key:"getNodes",value:function(){var e=this,t=[];return this.items.forEach((function(n){t.push(e.convertToNodeItem(n))})),t}},{key:"convertToNodeItem",value:function(e){if(!e.schema){var t=new ze(e.id,e.x,e.y,e.schemaId,e.inputValues,e.inputSlots,e.inputFlowSlots,e.outputSlots,e.outputFlowSlots,e.customName,e.variableId);return this.items.set(e.id,t),t}return e}},{key:"updateNodes",value:function(){Xe.updateScriplet(this.id,{items:this.items})}},{key:"deleteNode",value:function(e){return this.deleteNodes(e)}},{key:"deleteNodes",value:function(){for(var e=this,t=!0,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return a.forEach((function(n){e.items.delete(n)||(t=!1)})),Xe.updateScriplet(this.id,{items:this.items}),t}},{key:"addVariable",value:function(e,t,n,a){this.addVariables({name:e,type:t,startValue:n,value:a})}},{key:"addVariables",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach((function(t){var n=e.variableCounter++;e.variables.set(n,{id:n,name:t.name,type:t.type,startValue:t.startValue,value:t.value})})),Xe.updateScriplet(this.id,{variables:this.variables,variableCounter:this.variableCounter})}},{key:"getVariable",value:function(e){return this.variables.get(e)}},{key:"getVariables",value:function(){return Object(te.a)(this.variables.values())}},{key:"setVariable",value:function(e){this.variables.set(e.id,e)}},{key:"resetVariables",value:function(){this.variables.forEach((function(e){e.value=void 0}))}}]),e}(),Xe=new(function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this,"VisualScriptingDB")).scriplets=void 0,e.version(1).stores({scriplets:"++id, name"}),e.open().catch((function(t){console.error("Opening the db '".concat(e.name,"' failed: ").concat(t))})),e.scriplets=e.table("scriplets"),e.scriplets.mapToClass(Ke),e.seedData(),e}return Object(d.a)(n,[{key:"seedData",value:function(){var e=this;this.scriplets.toArray().then((function(t){if(t.length<=0){var n={id:0,x:0,y:0,schemaId:Pe.Start,inputValues:[],inputSlots:[],inputFlowSlots:[],outputSlots:new Map,outputFlowSlots:[{id:0,itemId:4,slotId:0}],customName:void 0,variableId:void 0};e.addScriplet("Check If Prime",n).then((function(e){e?(e.addVariables({name:"Is Prime",type:"Boolean",startValue:!0,value:void 0}),e.addNodes(!0,{x:-530,y:240,schemaId:Pe.InputNumber,inputValues:[{id:0,value:97}],inputSlots:[],inputFlowSlots:[],outputSlots:new Map([[0,[{id:0,itemId:2,slotId:0},{id:0,itemId:3,slotId:0}]]]),outputFlowSlots:[],customName:"Number To Check"},{x:-290,y:118,schemaId:Pe.DivideNumbers,inputValues:[{id:1,value:2}],inputSlots:[{id:0,itemId:1,slotId:0}],inputFlowSlots:[],outputSlots:new Map([[0,[{id:0,itemId:3,slotId:0}]]]),outputFlowSlots:[],customName:"Half Number"},{x:-32,y:118,schemaId:Pe.AddNumbers,inputValues:[{id:1,value:1}],inputSlots:[{id:0,itemId:2,slotId:0}],inputFlowSlots:[],outputSlots:new Map([[0,[{id:0,itemId:4,slotId:3}]]]),outputFlowSlots:[],customName:"Plus One"},{x:225,y:0,schemaId:Pe.ForLoopBreak,inputValues:[{id:2,value:2}],inputSlots:[{id:3,itemId:3,slotId:0}],inputFlowSlots:[{id:0,itemId:0,slotId:0},{id:1,itemId:8,slotId:0}],outputSlots:new Map([[2,[{id:2,itemId:5,slotId:1}]]]),outputFlowSlots:[{id:0,itemId:7,slotId:0},{id:1,itemId:9,slotId:0}]},{x:473,y:240,schemaId:Pe.ModuloNumbers,inputValues:[],inputSlots:[{id:0,itemId:1,slotId:0},{id:1,itemId:4,slotId:2}],inputFlowSlots:[],outputSlots:new Map([[0,[{id:0,itemId:6,slotId:0}]]]),outputFlowSlots:[]},{x:743,y:132,schemaId:Pe.EqualNumbers,inputValues:[],inputSlots:[{id:0,itemId:5,slotId:0}],inputFlowSlots:[],outputSlots:new Map([[0,[{id:0,itemId:7,slotId:1}]]]),outputFlowSlots:[],customName:"Equals Zero"},{x:986,y:-18,schemaId:Pe.IfElse,inputValues:[],inputSlots:[{id:1,itemId:6,slotId:0}],inputFlowSlots:[{id:0,itemId:4,slotId:0}],outputSlots:new Map,outputFlowSlots:[{id:0,itemId:8,slotId:0}],customName:"Check If Prime"},{x:1250,y:100,schemaId:Pe.SetBoolean,inputValues:[{id:1,value:!1}],inputSlots:[],inputFlowSlots:[{id:0,itemId:7,slotId:0}],outputSlots:new Map,outputFlowSlots:[{id:0,itemId:4,slotId:1}],customName:"Set Is Prime",variableId:1},{x:864,y:278,schemaId:Pe.IfElse,inputValues:[],inputSlots:[{id:1,itemId:12,slotId:0}],inputFlowSlots:[{id:0,itemId:4,slotId:1}],outputSlots:new Map,outputFlowSlots:[{id:0,itemId:10,slotId:0},{id:1,itemId:11,slotId:0}],customName:"If IsPrime is True"},{x:1164,y:278,schemaId:Pe.PrintBoolean,inputValues:[],inputSlots:[],inputFlowSlots:[{id:0,itemId:9,slotId:0}],outputSlots:new Map,outputFlowSlots:[],customName:"Is Definitely Prime"},{x:1164,y:420,schemaId:Pe.PrintBoolean,inputValues:[{id:1,value:!1}],inputSlots:[],inputFlowSlots:[{id:0,itemId:9,slotId:1}],outputSlots:new Map,outputFlowSlots:[],customName:"Is Definitely Not Prime"},{x:564,y:400,schemaId:Pe.GetBoolean,inputValues:[],inputSlots:[],inputFlowSlots:[],outputSlots:new Map([[0,[{id:0,itemId:9,slotId:1}]]]),outputFlowSlots:[],customName:"Get Is Prime",variableId:1})):console.error("Something went wrong when creating a scriplet. Check if scriplet name is not empty.")})),e.addScriplet("Empty Scriplet").then((function(e){e?(e.addVariables({name:"Test Variable",type:"Number",startValue:16,value:void 0}),e.addNodes(!0,{x:0,y:100,schemaId:Pe.GetNumber,inputValues:[],inputSlots:[],inputFlowSlots:[],outputSlots:new Map,outputFlowSlots:[],customName:"Test Name",variableId:1},{x:0,y:200,schemaId:Pe.SetNumber,inputValues:[],inputSlots:[],inputFlowSlots:[],outputSlots:new Map,outputFlowSlots:[],customName:"Test Name 2",variableId:1})):console.error("Something went wrong when creating a scriplet. Check if scriplet name is not empty.")}))}}))}},{key:"getScriplet",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scriplets.get(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",new Ke(n.name,n.id,n.start,n.items,n.itemCounter,n.variables,n.variableCounter));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScriplets",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scriplets.toArray();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push(new Ke(e.name,e.id,e.start,e.items,e.itemCounter,e.variables,e.variableCounter))})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addScriplet",value:function(){var e=Object(w.a)(y.a.mark((function e(t,n,a,o,r,l){var i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return console.error("When creating a scriplet, it cannot have an empty name."),e.abrupt("return");case 3:return i={name:t,start:n,items:a,itemCounter:o,variables:r,variableCounter:l},e.next=6,this.scriplets.add(i);case 6:return c=e.sent,e.abrupt("return",new Ke(t,c,n,a,o,r,l));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a,o,r,l){return e.apply(this,arguments)}}()},{key:"updateScriplet",value:function(){var e=Object(w.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scriplets.update(t,n);case 2:if(0!==e.sent){e.next=6;break}return console.error("The scriplet of id '".concat(t,"' could not be found in the database; nothing was updated.")),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateEntireScriplet",value:function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scriplets.where(":id").equals(t.id).modify((function(e,n){return n.value=t}));case 2:if(0!==e.sent){e.next=6;break}return console.error("The scriplet of id '".concat(t.id,"' could not be found in the database; nothing was updated.")),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteScriplet",value:function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scriplets.delete(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(S.a)),Ue=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isHovered:!1},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.scriplet,a=t.closeNavMenu,r=t.onScripletDelete,l=this.state.isHovered;return o.a.createElement("div",{className:"flex flex-row mb-1 px-4 py-2 rounded-md hover:bg-gray-900",onMouseOver:function(){e.setState({isHovered:!0})},onMouseOut:function(){e.setState({isHovered:!1})}},o.a.createElement(p.b,{onClick:a,to:"/scriplet/"+n.id,className:"w-full flex items-center text-gray-100"},o.a.createElement(v.a,{className:"mr-4 text-lg text-gray-600",icon:"folder"}),n.name),o.a.createElement("button",{className:"".concat(l?"":"hidden"," ml-2 px-2 rounded-sm bg-red-500 text-gray-100"),onClick:function(){return r(n.id)}},o.a.createElement(v.a,{icon:"trash"})))}}]),n}(o.a.Component),Ze=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).itemNameInput=void 0,a.itemNameInput=o.a.createRef(),a.state={itemName:"",isAddingItem:!1},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.buttonName,a=t.onClick,r=t.onSubmitClick,l=t.onCancelClick,i=this.state,c=i.isAddingItem,u=i.itemName;return o.a.createElement("div",{className:"w-full mb-1 rounded-md border-gray-600 border-dashed border-2 cursor-pointer hover:bg-gray-900 focus:bg-gray-900 text-gray-500"},o.a.createElement("div",{className:"".concat(c?"hidden":""," px-4 py-2"),onClick:function(){a(),e.setState({isAddingItem:!0})}},o.a.createElement(v.a,{className:"mr-4 text-lg text-gray-600",icon:"plus"}),o.a.createElement("span",{className:"font-medium"},n)),o.a.createElement("div",{className:"".concat(c?"flex":"hidden"," flex-row px-4 py-2")},o.a.createElement("input",{ref:this.itemNameInput,className:"w-full px-2 text-gray-900",type:"text",value:u,onChange:function(t){e.setState({itemName:t.target.value})}}),o.a.createElement("button",{className:"ml-2 px-2 rounded-sm bg-red-500 text-gray-100",onClick:function(){l(),e.setState({isAddingItem:!1,itemName:""})}},o.a.createElement(v.a,{icon:"times"})),o.a.createElement("button",{className:"ml-2 px-2 rounded-sm text-xs bg-green-500 text-gray-100",onClick:function(){r(u),e.setState({isAddingItem:!1,itemName:""})}},o.a.createElement(v.a,{icon:"check"}))))}}]),n}(o.a.Component);Ze.defaultProps={buttonName:"Add",onClick:function(){},onSubmitClick:function(){},onCancelClick:function(){}};var Qe=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).scripletNameInput=void 0,a.scripletNameInput=o.a.createRef(),a.state={scriplets:[],isDirtyDB:!1,isNavMenuOpen:!1,isSidebarOpen:!0,openProjectModal:function(){}},a.openNavMenu=a.openNavMenu.bind(Object(f.a)(a)),a.closeNavMenu=a.closeNavMenu.bind(Object(f.a)(a)),a.toggleNavMenu=a.toggleNavMenu.bind(Object(f.a)(a)),a.openSidebar=a.openSidebar.bind(Object(f.a)(a)),a.closeSidebar=a.closeSidebar.bind(Object(f.a)(a)),a.toggleSidebar=a.toggleSidebar.bind(Object(f.a)(a)),a.onScripletCreate=a.onScripletCreate.bind(Object(f.a)(a)),a.onScripletDelete=a.onScripletDelete.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;Xe.getScriplets().then((function(t){e.setState({scriplets:t})}))}},{key:"componentDidUpdate",value:function(){var e=this;this.state.isDirtyDB&&Xe.getScriplets().then((function(t){e.setState({scriplets:t,isDirtyDB:!1})}));var t=this.scripletNameInput.current;t&&(t.classList.contains("hidden")||t.focus())}},{key:"openNavMenu",value:function(){this.setState({isNavMenuOpen:!0})}},{key:"closeNavMenu",value:function(){this.setState({isNavMenuOpen:!1})}},{key:"toggleNavMenu",value:function(){this.state.isNavMenuOpen?this.closeNavMenu():this.openNavMenu()}},{key:"openSidebar",value:function(){this.setState({isSidebarOpen:!0})}},{key:"closeSidebar",value:function(){this.setState({isSidebarOpen:!1})}},{key:"toggleSidebar",value:function(){this.state.isSidebarOpen?this.closeSidebar():this.openSidebar()}},{key:"onScripletCreate",value:function(e){var t=this;Xe.addScriplet(e).then((function(e){e&&t.setState({isDirtyDB:!0})}))}},{key:"onScripletDelete",value:function(e){var t=this;Xe.deleteScriplet(e).then((function(){t.setState({isDirtyDB:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.scriplets,a=t.isNavMenuOpen,r=t.isSidebarOpen,l=t.openProjectModal;return o.a.createElement("nav",{className:"nav"},o.a.createElement("div",{className:"topbar"},o.a.createElement("div",{className:"lg:hidden flex items-center justify-between p-4 bg-gray-800"},o.a.createElement("div",{className:""},o.a.createElement(p.b,{to:"/",className:"text-xl text-gray-100 font-semibold"},o.a.createElement(v.a,{className:"mr-4 text-2xl text-indigo-500",icon:"project-diagram"}),"Visual Scripting")),o.a.createElement("div",{className:"block"},o.a.createElement("button",{className:"flex items-center py-2 px-3 text-indigo-500 rounded border border-indigo-500 hover:bg-indigo-300",onClick:this.toggleNavMenu},o.a.createElement(v.a,{icon:"bars"})))),o.a.createElement("div",{className:"".concat(a?"":"hidden"," lg:hidden relative z-20")},o.a.createElement("div",{className:"absolute w-full px-4 pb-4 bg-gray-800"},n.map((function(t,n){return o.a.createElement(p.b,{key:n,onClick:e.closeNavMenu,to:"/scriplet/"+t.id,className:"block mb-1 px-4 py-2 rounded-md hover:bg-gray-900 focus:bg-gray-900 text-gray-100"},o.a.createElement(v.a,{className:"mr-4 text-lg text-gray-600",icon:"folder"}),t.name)})),o.a.createElement(Ze,{buttonName:"Add Scriplet",onSubmitClick:this.onScripletCreate})))),o.a.createElement("div",null,o.a.createElement("div",{className:"".concat(r?"sidebar shadow":"hidden")},o.a.createElement("div",{className:"flex-grow h-screen bg-gray-800 relative"},o.a.createElement("div",{className:"p-4 h-16"},o.a.createElement(p.b,{to:"/",className:"text-xl text-gray-100 font-semibold"},o.a.createElement(v.a,{className:"mr-4 text-2xl text-indigo-500",icon:"project-diagram"}),"Visual Scripting")),o.a.createElement("div",{className:"p-2 fixed top-16 bottom-0 my-auto lg:w-64"},o.a.createElement(b.a,{noScrollX:!0},n.map((function(t,n){return o.a.createElement(Ue,{key:"scriplet-".concat(n),scriplet:t,closeNavMenu:e.closeNavMenu,onScripletDelete:e.onScripletDelete})})),o.a.createElement(Ze,{buttonName:"Add Scriplet",onSubmitClick:this.onScripletCreate}))))),o.a.createElement("div",{className:"".concat(r?"hidden":"collapsed-sidebar shadow")},o.a.createElement("div",{className:"flex-grow h-screen bg-gray-800 relative"},o.a.createElement("div",{className:"p-4 h-16 text-center"},o.a.createElement(p.b,{to:"/",className:"text-xl text-gray-100 font-semibold"},o.a.createElement(v.a,{className:"text-2xl text-indigo-500",icon:"project-diagram"}))),o.a.createElement("div",{className:"sidebar-items p-2 fixed top-16 bottom-0 my-auto"},o.a.createElement(b.a,{noScrollX:!0},n.map((function(t,n){return o.a.createElement(p.b,{key:n,onClick:e.closeNavMenu,to:"/scriplet/"+t.id,className:"block border-gray-700 border-solid border hover:border-opacity-0 mb-1 py-2 text-center rounded-md hover:bg-gray-900 focus:bg-gray-900 text-gray-100 font-bold"},t.name[0])})),o.a.createElement("div",{className:"flex mb-1 py-2 justify-center rounded-md border-gray-600 border-dashed border-2 cursor-pointer hover:bg-gray-900 focus:bg-gray-900 text-gray-500",onClick:function(){console.log("test"),l()}},o.a.createElement("div",{className:"inline-block"},o.a.createElement(v.a,{className:"text-lg text-gray-600",icon:"plus"}))))))),o.a.createElement("button",{className:"".concat(r?"w-64 ml-8 pl-56":"w-16 ml-8 pl-8"," sidebar-toggle items-center rounded-full bg-gray-700"),onClick:this.toggleSidebar},o.a.createElement("div",{className:"inline-block pl-2"},o.a.createElement(v.a,{icon:"chevron-left",className:"".concat(r?"block":"hidden"," text-gray-300")}),o.a.createElement(v.a,{icon:"chevron-right",className:"".concat(r?"hidden":"block"," text-gray-300")})))))}}]),n}(o.a.Component),Ye=n(7),$e=function(){function e(){Object(s.a)(this,e)}return Object(d.a)(e,null,[{key:"setCursor",value:function(e,t){var n=e.target.getStage();n?n.container().style.cursor=t:console.error("The Konva stage could not be found.")}}]),e}(),_e=function(){function e(){Object(s.a)(this,e)}return Object(d.a)(e,null,[{key:"cancel",value:function(){Je.cancelInput(),nt.cancelDropdown()}}]),e}(),Je=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={value:""},a.showInput=a.showInput.bind(Object(f.a)(a)),a.onHover=a.onHover.bind(Object(f.a)(a)),a.onHoverExit=a.onHoverExit.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"showInput",value:function(e){var t=this;n.cancelInput();var a=this.props,o=a.width,r=a.height,l=a.fontSize,i=a.padding,c=a.textColor,u=a.hoverColor,s=a.borderRadius,d=a.zIndex,f=a.type,h=a.isEditable,m=a.onChange,v=""===this.state.value?this.props.value:this.state.value;if(h){var p=e.target.getStage();if(p){var b=p.scaleX(),g=e.target.absolutePosition().y,y=e.target.absolutePosition().x,w=document.createElement("input");document.body.appendChild(w),w.value=v,w.type=f,w.style.position="absolute",w.style.top="".concat(g,"px"),w.style.left="".concat(y,"px"),w.style.width="".concat(Math.min(o*b,window.innerWidth-y),"px"),w.style.height="".concat(r*b,"px"),w.style.paddingLeft="".concat(i*b,"px"),w.style.fontSize="".concat(l*b,"px"),w.style.color=c,w.style.backgroundColor=u,w.style.borderRadius="".concat(s*b,"px"),w.style.zIndex="".concat(d),w.focus(),w.onchange=function(e){var a=e.target;return a?a.value?m(a.value)?(m(a.value),t.setState({value:a.value}),void n.cancelInput()):(console.error("Input value requirements not met."),void n.cancelInput()):(console.error("No value typed in while editing the text."),void n.cancelInput()):(console.error("Cannot cast target to 'HTMLInputElement'."),void n.cancelInput())},n.inputElement=w}else console.error("The Konva stage could not be found.")}}},{key:"onHover",value:function(e){if(this.props.isEditable){$e.setCursor(e,"text");var t=e.currentTarget.getLayer();if(t)e.currentTarget.children[0].setAttr("fill",this.props.hoverColor),t.draw();else console.error("The Konva layer could not be found.")}}},{key:"onHoverExit",value:function(e){if(this.props.isEditable){$e.setCursor(e,"default");var t=e.currentTarget.getLayer();if(t)e.currentTarget.children[0].setAttr("fill",this.props.bgColor),t.draw();else console.error("The Konva layer could not be found.")}}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,a=t.y,r=t.width,l=t.height,i=t.fontSize,c=t.fontStyle,u=t.padding,s=t.textColor,d=t.bgColor,f=t.borderRadius,h=""===this.state.value?this.props.value:this.state.value;return o.a.createElement(Ye.Label,{name:"top-bar-label",x:n,y:a,onMouseEnter:this.onHover,onMouseLeave:this.onHoverExit,onClick:function(t){t.cancelBubble=!0,e.showInput(t)},onTap:function(t){t.cancelBubble=!0,e.showInput(t)}},o.a.createElement(Ye.Tag,{fill:d,cornerRadius:f}),o.a.createElement(Ye.Text,{name:"top-bar-text",width:r,height:l,fontStyle:c,fontSize:i,verticalAlign:"middle",padding:u,fill:s,text:h}))}}],[{key:"cancelInput",value:function(){var e,t=n.inputElement;t&&(t.onchange=null,null===(e=t.parentNode)||void 0===e||e.removeChild(t))}}]),n}(o.a.Component);Je.inputElement=void 0,Je.defaultProps={x:0,y:0,width:100,height:20,fontSize:12,fontStyle:"normal",padding:0,textColor:"#000000",bgColor:"#ffffff",hoverColor:"#cccccc",borderRadius:0,zIndex:0,value:"",type:"text",isEditable:!0,onChange:function(){return!1}};var et,tt,nt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={selectedIndex:0},a.showDropdown=a.showDropdown.bind(Object(f.a)(a)),a.onHover=a.onHover.bind(Object(f.a)(a)),a.onHoverExit=a.onHoverExit.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"showDropdown",value:function(e){var t=this;n.cancelDropdown();var a=this.props,o=a.width,r=a.height,l=a.padding,i=a.fontSize,c=a.textColor,u=a.hoverColor,s=a.borderRadius,d=a.zIndex,f=a.values,h=a.onChange,m=e.target.getStage();if(m){var v=m.scaleX(),p=e.target.absolutePosition().y,b=e.target.absolutePosition().x,g=document.createElement("select");document.body.appendChild(g),f.forEach((function(e){var t=document.createElement("option");t.value=e,t.innerText=e,g.add(t)})),g.selectedIndex=this.state.selectedIndex,g.style.position="absolute",g.style.top="".concat(p,"px"),g.style.left="".concat(b,"px"),g.style.width="".concat(Math.min(o*v,window.innerWidth-b),"px"),g.style.height="".concat(r*v,"px"),g.style.paddingLeft="".concat(l*v,"px"),g.style.fontSize="".concat(i*v,"px"),g.style.color=c,g.style.backgroundColor=u,g.style.borderRadius="".concat(s*v,"px"),g.style.zIndex="".concat(d),g.focus(),g.onchange=function(e){var a=e.target;return a?a.value?h(a.value)?(h(a.value),t.setState({selectedIndex:a.selectedIndex}),void n.cancelDropdown()):(console.error("Input value requirements not met."),void n.cancelDropdown()):(console.error("No value selected."),void n.cancelDropdown()):(console.error("Cannot cast target to 'HTMLSelectElement'."),void n.cancelDropdown())},n.dropdownElement=g}else console.error("The Konva stage could not be found.")}},{key:"onHover",value:function(e){$e.setCursor(e,"pointer");var t=e.currentTarget.getLayer();t?(e.currentTarget.children[0].setAttr("fill",this.props.hoverColor),t.draw()):console.error("The Konva layer could not be found.")}},{key:"onHoverExit",value:function(e){$e.setCursor(e,"default");var t=e.currentTarget.getLayer();t?(e.currentTarget.children[0].setAttr("fill",this.props.bgColor),t.draw()):console.error("The Konva layer could not be found.")}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,a=t.y,r=t.width,l=t.height,i=t.fontSize,c=t.fontStyle,u=t.padding,s=t.textColor,d=t.bgColor,f=t.borderRadius,h=t.values,m=t.value;return o.a.createElement(Ye.Label,{name:"top-bar-label",x:n,y:a,onMouseEnter:this.onHover,onMouseLeave:this.onHoverExit,onClick:function(t){t.cancelBubble=!0,e.showDropdown(t)},onTap:function(t){t.cancelBubble=!0,e.showDropdown(t)}},o.a.createElement(Ye.Tag,{fill:d,cornerRadius:f}),o.a.createElement(Ye.Text,{name:"top-bar-text",width:r,height:l,fontStyle:c,fontSize:i,verticalAlign:"middle",padding:u,fill:s,text:m&&h.includes(m)?m:h[this.state.selectedIndex]}))}}],[{key:"cancelDropdown",value:function(){var e,t=n.dropdownElement;t&&(t.onchange=null,null===(e=t.parentNode)||void 0===e||e.removeChild(t))}}]),n}(o.a.Component);nt.dropdownElement=void 0,nt.defaultProps={x:0,y:0,width:100,height:20,fontSize:12,fontStyle:"normal",padding:0,textColor:"#000000",bgColor:"#ffffff",hoverColor:"#cccccc",borderRadius:0,zIndex:0,values:[],value:"",onChange:function(){return!1}},function(e){e[e.Circle=0]="Circle",e[e.Arrow=1]="Arrow"}(et||(et={})),function(e){e[e.None=0]="None",e[e.Input=1]="Input",e[e.Dropdown=2]="Dropdown"}(tt||(tt={}));var at=new(function(){function e(){Object(s.a)(this,e),this.configs=void 0,this.configs=new Map;var t={handleType:et.Circle,handleBorderColor:ae.Green[700],handleFillColor:ae.Green[600],inputType:tt.Input,defaultInputValue:"",initialValue:$.defaultValue,fromString:$.convertFromString,toString:$.convertToString},n={handleType:et.Circle,handleBorderColor:ae.Purple[600],handleFillColor:ae.Purple[500],inputType:tt.Dropdown,defaultInputValue:["true","false"],initialValue:_.defaultValue,fromString:_.convertFromString,toString:_.convertToString},a={handleType:et.Arrow,handleBorderColor:ae.Gray[500],handleFillColor:ae.Gray[100],inputType:tt.None,defaultInputValue:"",initialValue:J.defaultValue,fromString:J.convertFromString,toString:J.convertToString},o={handleType:et.Circle,handleBorderColor:ae.Gray[100],handleFillColor:ae.Gray[100],inputType:tt.None,defaultInputValue:"",initialValue:ee.defaultValue,fromString:function(){},toString:function(){return""}};this.configs.set($.className,t),this.configs.set(_.className,n),this.configs.set(J.className,a),this.configs.set(ee.className,o)}return Object(d.a)(e,[{key:"getConfig",value:function(e){return this.configs.get(e)}}]),e}()),ot=n(46),rt=n.n(ot),lt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={startPosition:{x:0,y:0}},a.onDragStart=a.onDragStart.bind(Object(f.a)(a)),a.onDragMove=a.onDragMove.bind(Object(f.a)(a)),a.onDragEnd=a.onDragEnd.bind(Object(f.a)(a)),a.onMouseEnter=a.onMouseEnter.bind(Object(f.a)(a)),a.onMouseExit=a.onMouseExit.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"onDragStart",value:function(e){if(e.target.getLayer()){_e.cancel();var t=e.target,a=t.parent;if(a){var o=t.getPosition(),r=o,l="M".concat(o.x," ").concat(o.y-2," L").concat(r.x," ").concat(r.y-2),i=new rt.a.Path({data:l,stroke:ae.Gray[800],strokeWidth:4});a.add(i),n.path=i,this.setState({startPosition:o})}else console.error("This Konva node should be under a container node.")}else console.error("The Konva layer could not be found.")}},{key:"onDragMove",value:function(e){var t=this.props.isInput,a=this.state.startPosition;if(e.target.getLayer()){var o,r,l=e.target.getPosition();t?(o=l,r=a):(o=a,r=l);var i={x:(r.x-o.x)/2+o.x,y:(r.y-o.y)/2+o.y},c="M".concat(o.x," ").concat(o.y-2," Q").concat(o.x+30," ").concat(o.y-2," ").concat(i.x," ").concat(i.y-2," Q").concat(r.x-30," ").concat(r.y-2," ").concat(r.x," ").concat(r.y-2),u=n.path;u?u.data(c):console.error("The Konva path could not be found.")}else console.error("The Konva layer could not be found.")}},{key:"onDragEnd",value:function(e){var t=this.props,a=t.isInput,o=t.isFlow,r=t.itemId,l=t.onConnect,i=this.state.startPosition,c=e.target;c.position(i);var u=n.path;null!=u&&(u.destroy(),n.path=null);var s=c.getStage();if(s){s.draw();var d=s.getPointerPosition();if(d){var f=Math.floor(d.x),h=Math.floor(d.y),m=s.getAllIntersections({x:f,y:h});if(m&&!(m.length<=0)){var v,p,b=0,g=0;for(p=0;p<m.length;p++){var y=m[p],w=y.getAttr("data-type");if(w&&(a?"output"===w:"input"===w)){var S=y.getAttr("data-slot-type");if(S&&(o?"control"===S:"data"===S))if(b=y.getAttr("data-item-id"),g=y.getAttr("data-slot-id"),null!=b&&null!=g){if(r!==b){v=y;break}}else console.error("No attributes 'data-item-id' or 'data-slot-id' could be found from the element.")}}v&&l(b,g)}}else console.error("The Konva pointer position could not be found.")}else console.error("The Konva stage could not be found.")}},{key:"onMouseEnter",value:function(e){$e.setCursor(e,"pointer")}},{key:"onMouseExit",value:function(e){$e.setCursor(e,"default")}},{key:"render",value:function(){var e=this,t=this.props,n=t.fill,a=t.stroke,r=t.type,l=t.isInput,i=t.isFlow,c=t.itemId,u=t.slotId;return o.a.createElement(o.a.Fragment,null,r===et.Circle&&o.a.createElement(Ye.Circle,{x:l?18:-18,y:18,radius:4,fill:n,stroke:a,strokeWidth:1,scale:{x:1.5,y:1.5},listening:!1})||r===et.Arrow&&o.a.createElement(Ye.Path,{data:"M6.659,13.549L12.139,8.753C12.356,8.563 12.481,8.288 12.481,8C12.481,7.712 12.356,7.437 12.139,7.247L6.66,2.451C6.011,1.885 5,2.345 5,3.204L5,12.796C5,12.796 5,12.797 5,12.797C5,13.345 5.451,13.797 6,13.797C6.242,13.797 6.477,13.709 6.659,13.549Z",x:l?5:-31,y:6,fill:n,stroke:a,strokeWidth:1,scale:{x:1.5,y:1.5},listening:!1}),o.a.createElement(Ye.Circle,{"data-type":"".concat(l?"input":"output"),"data-slot-type":"".concat(i?"control":"data"),"data-item-id":c,"data-slot-id":u,x:l?18:-18,y:22,radius:15,fill:"transparent",draggable:!0,onDragStart:function(t){t.cancelBubble=!0,e.onDragStart(t)},onDragMove:function(t){t.cancelBubble=!0,e.onDragMove(t)},onDragEnd:function(t){t.cancelBubble=!0,e.onDragEnd(t)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseExit}))}}]),n}(o.a.Component);lt.path=null;var it=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).label=void 0,a.type=void 0,a.label=o.a.createRef(),a.type=o.a.createRef(),a.state={labelWidth:100,typeWidth:100},a.onInputChanged=a.onInputChanged.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=null===(e=this.label.current)||void 0===e?void 0:e.width(),a=null===(t=this.type.current)||void 0===t?void 0:t.width();n&&a?this.setState({labelWidth:n,typeWidth:a}):console.error("The referenced Konva label or type text could not be found.")}},{key:"onInputChanged",value:function(e){var t=this.props,n=t.inputSlot,a=t.onInputChange,o=at.getConfig(n.type);if(!o)return console.error("Cannot find the input initial values for the given type '".concat(n.type,"'.")),!1;var r=o.fromString(e);return null!=r&&a(r)}},{key:"render",value:function(){var e,t,n=this.props,a=n.inputSlot,r=n.inputConnection,l=n.x,i=n.y,c=n.itemId,u=n.onConnect,s=this.state,d=s.labelWidth,f=s.typeWidth,h=at.getConfig(a.type);if(!h)return console.error("Cannot find the input initial values for the given type '".concat(a.type,"'.")),null;var m=null===(e=W.currentScriplet)||void 0===e?void 0:e.getNode(c);return m?o.a.createElement(Ye.Group,{x:l,y:i},o.a.createElement(Ye.Text,{ref:this.label,x:a.isConnectable?36:16,y:0,height:20,fontSize:12,fontStyle:"bold",verticalAlign:"bottom",fill:ae.Gray[100],text:a.name}),o.a.createElement(Ye.Text,{ref:this.type,x:a.isConnectable?36:16,y:20,height:20,fontSize:10,verticalAlign:"top",fill:ae.Gray[100],text:a.type}),!r&&(h.inputType===tt.Input&&o.a.createElement(Je,{x:a.isConnectable?44+Math.max(d,f):24+Math.max(d,f),y:12,width:30,height:12,fontSize:10,padding:2,borderRadius:2,textColor:ae.Gray[100],bgColor:ae.Gray[700],hoverColor:ae.Gray[600],value:"".concat(null!==(t=m.getInputValue(a.id))&&void 0!==t?t:a.defaultValue),isEditable:a.isEditable,onChange:this.onInputChanged})||h.inputType===tt.Dropdown&&o.a.createElement(nt,{x:a.isConnectable?44+Math.max(d,f):24+Math.max(d,f),y:12,width:30,height:12,fontSize:10,padding:2,borderRadius:2,textColor:ae.Gray[100],bgColor:ae.Gray[700],hoverColor:ae.Gray[600],values:h.defaultInputValue,value:null!=m.getInputValue(a.id)?"".concat(m.getInputValue(a.id)):"".concat(a.defaultValue),onChange:this.onInputChanged})),a.isConnectable&&o.a.createElement(lt,{fill:r?h.handleFillColor:"transparent",stroke:h.handleBorderColor,type:h.handleType,isInput:!0,isFlow:!1,itemId:c,slotId:a.id,onConnect:u})):(console.error("The node item of id '".concat(c,"' could not be found.")),null)}}]),n}(o.a.Component),ct=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).label=void 0,a.type=void 0,a.label=o.a.createRef(),a.type=o.a.createRef(),a.state={labelWidth:100,typeWidth:100},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=null===(e=this.label.current)||void 0===e?void 0:e.width(),a=null===(t=this.type.current)||void 0===t?void 0:t.width();n&&a?this.setState({labelWidth:n,typeWidth:a}):console.error("The referenced Konva label or type text could not be found.")}},{key:"render",value:function(){var e=this.props,t=e.outputSlot,n=e.outputConnections,a=e.x,r=e.y,l=e.itemId,i=e.onConnect,c=this.state,u=c.labelWidth,s=c.typeWidth,d=at.getConfig(t.type);return d?o.a.createElement(Ye.Group,{x:a,y:r},o.a.createElement(Ye.Text,{ref:this.label,x:0,y:0,offsetX:36+u,height:20,fontSize:12,fontStyle:"bold",align:"right",verticalAlign:"bottom",fill:ae.Gray[100],text:t.name}),o.a.createElement(Ye.Text,{ref:this.type,x:0,y:20,offsetX:36+s,height:20,fontSize:10,align:"right",verticalAlign:"top",fill:ae.Gray[100],text:t.type}),o.a.createElement(lt,{fill:n.length>0?d.handleFillColor:"transparent",stroke:d.handleBorderColor,type:d.handleType,isInput:!1,isFlow:!1,itemId:l,slotId:t.id,onConnect:i})):(console.error("Cannot find the input initial values for the given type '".concat(t.type,"'.")),null)}}]),n}(o.a.Component),ut=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.inputFlowSlot,n=e.inputFlowConnection,a=e.x,r=e.y,l=e.itemId,i=e.onConnect;return o.a.createElement(Ye.Group,{x:a,y:r},o.a.createElement(Ye.Text,{x:t.isConnectable?36:16,y:0,height:40,fontSize:12,fontStyle:"bold",verticalAlign:"middle",fill:ae.Gray[100],text:t.name}),t.isConnectable&&o.a.createElement(lt,{fill:n?ae.Gray[100]:"transparent",stroke:ae.Gray[500],type:et.Arrow,isInput:!0,isFlow:!0,itemId:l,slotId:t.id,onConnect:i}))}}]),n}(o.a.Component),st=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).label=void 0,a.label=o.a.createRef(),a.state={labelWidth:100},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e,t=null===(e=this.label.current)||void 0===e?void 0:e.width();t?this.setState({labelWidth:t}):console.error("The referenced Konva label text could not be found.")}},{key:"render",value:function(){var e=this.props,t=e.outputFlowSlot,n=e.outputFlowConnection,a=e.x,r=e.y,l=e.itemId,i=e.onConnect,c=this.state.labelWidth;return o.a.createElement(Ye.Group,{x:a,y:r},o.a.createElement(Ye.Text,{ref:this.label,x:0,y:0,offsetX:36+c,height:40,fontSize:12,fontStyle:"bold",align:"right",verticalAlign:"middle",fill:ae.Gray[100],text:t.name}),o.a.createElement(lt,{fill:n?ae.Gray[100]:"transparent",stroke:ae.Gray[500],type:et.Arrow,isInput:!1,isFlow:!0,itemId:l,slotId:t.id,onConnect:i}))}}]),n}(o.a.Component),dt=(n(138),n(139),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).group=void 0,a.group=o.a.createRef(),a.state={draggedHandlePath:null,isStateOpen:!1,stateVisual:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e;null===(e=this.group.current)||void 0===e||e.getLayer()}},{key:"render",value:function(){var e,t,n,a,r,l,i=this.props,c=i.item,u=i.width,s=i.rowHeight,d=i.topBarHeight,f=i.handleDragNode,h=i.deleteNodeItem,m=i.updateDOM,v=c.schema?c.schema.maxLength()*s+d:0,p=c.schema;if(!p)return console.error("The schema for node item '".concat(c.id,"' could not be found.")),null;var b=p.inputSlots,g=p.outputSlots,y=p.inputFlowSlots,w=p.outputFlowSlots,S=[];S=S.concat(y,b);var N=[];N=N.concat(w,g);var x=function(e){return!!e.type},O=function(e){return!!e.type};return o.a.createElement(Ye.Group,{id:"node-".concat(c.id),ref:this.group,x:c.x,y:c.y,width:u,height:v,draggable:!0,onDragStart:function(e){$e.setCursor(e,"move"),_e.cancel()},onDragEnd:function(e){var t;$e.setCursor(e,"default"),null===(t=W.currentScriplet)||void 0===t||t.updateNodes()},onDragMove:function(e){return f(c.id,e.target.x(),e.target.y())}},o.a.createElement(Ye.Rect,{name:"background",x:0,y:0,width:u,height:v+10,fill:ae.Gray[900],cornerRadius:5}),o.a.createElement(Ye.Rect,{name:"top-bar",x:0,y:0,width:u,height:d,fill:ae.Gray[900],cornerRadius:[5,5,0,0]}),o.a.createElement(Je,{x:10,y:2.5,width:p.isDeletable?u-40:u-20,height:d-5,borderRadius:2,padding:6,textColor:ae.Gray[100],bgColor:ae.Gray[900],hoverColor:ae.Gray[800],value:c.customName&&""!==c.customName?c.customName:null!==(e=null===(t=c.schema)||void 0===t?void 0:t.name)&&void 0!==e?e:"undefined",isEditable:p.isNameEditable,onChange:function(e){var t;return c.customName=e,null===(t=W.currentScriplet)||void 0===t||t.updateNodes(),!0}}),p.isDeletable&&o.a.createElement(Ye.Label,{x:u-20,y:8,onMouseEnter:function(e){e.cancelBubble=!0,$e.setCursor(e,"pointer")},onMouseLeave:function(e){e.cancelBubble=!0,$e.setCursor(e,"default")},onClick:function(e){$e.setCursor(e,"default"),_e.cancel(),h(c.id)}},o.a.createElement(Ye.Tag,{fill:ae.Red[500],cornerRadius:15}),o.a.createElement(Ye.Text,{width:12,height:12,fontSize:14,fontStyle:"bold",align:"center",verticalAlign:"center",fill:ae.Gray[900],text:"\xd7"})),o.a.createElement(Ye.Rect,{x:0,y:d,width:u,height:s*(null!==(n=null===(a=c.schema)||void 0===a?void 0:a.maxLength())&&void 0!==n?n:1),fill:ae.Gray[800]}),Array.from(Array(null!==(r=null===(l=c.schema)||void 0===l?void 0:l.maxLength())&&void 0!==r?r:0)).map((function(e,t){var n=t<S.length&&x(S[t])?S[t]:void 0,a=t<N.length&&O(N[t])?N[t]:void 0;n&&null==n.name&&(n.name="Input".concat(t)),a&&null==a.name&&(a.name="Output".concat(t));var r=t<S.length&&!x(S[t])?S[t]:void 0,l=t<N.length&&!O(N[t])?N[t]:void 0;return r&&null==r.name&&(r.name="Flow".concat(t)),l&&null==l.name&&(l.name="Flow".concat(t)),o.a.createElement(o.a.Fragment,{key:"node-slot-".concat(c.id,"-").concat(t)},null!=n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(it,{inputSlot:n,inputConnection:c.getInputConnection(n.id),x:0,y:d+t*s,itemId:c.id,onInputChange:function(e){var t;return c.setInputValue(n.id,e),null===(t=W.currentScriplet)||void 0===t||t.updateNodes(),!0},onConnect:function(e,t){H.addConnection(c.id,n.id,e,t),m()}})),null!=a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ct,{outputSlot:a,outputConnections:c.getOutputConnections(a.id),x:u,y:d+t*s,itemId:c.id,onConnect:function(e,t){H.addConnection(e,t,c.id,a.id),m()}})),null!=r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ut,{inputFlowSlot:r,inputFlowConnection:c.getInputFlowConnection(r.id),x:0,y:d+t*s,itemId:c.id,onConnect:function(e,t){H.addFlowConnection(c.id,r.id,e,t),m()}})),null!=l&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st,{outputFlowSlot:l,outputFlowConnection:c.getOutputFlowConnection(l.id),x:u,y:d+t*s,itemId:c.id,onConnect:function(e,t){H.addFlowConnection(e,t,c.id,l.id),m()}})))})))}}]),n}(o.a.Component)),ft=n(29),ht=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isHovered:!1},a.handleOnEnter=a.handleOnEnter.bind(Object(f.a)(a)),a.handleOnExit=a.handleOnExit.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"handleOnEnter",value:function(){this.setState({isHovered:!0})}},{key:"handleOnExit",value:function(){this.setState({isHovered:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.startPos,a=t.endPos,r=t.nodeWidthOther,l=t.nodeHeight,i=t.handleOnClick,c=t.children,u=this.state.isHovered,s=l/2,d={x:(a.x-n.x-r)/2+(n.x+r),y:(a.y+s-n.y-s)/2+(n.y+s)},f="M".concat(n.x+r," ").concat(n.y+s-2," Q").concat(n.x+r+30," ").concat(n.y+s-2," ").concat(d.x," ").concat(d.y-2," Q").concat(a.x-30," ").concat(a.y+s-2," ").concat(a.x," ").concat(a.y+s-2);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ye.Path,{data:f,stroke:ae.Gray[800],strokeWidth:4}),o.a.createElement(Ye.Path,{data:f,className:"cursor-pointer",stroke:"transparent",strokeWidth:50,onMouseEnter:function(t){e.handleOnEnter();var n=t.target.getStage();n?n.container().style.cursor="pointer":console.error("The Konva stage could not be found.")},onMouseLeave:function(t){e.handleOnExit();var n=t.target.getStage();n?n.container().style.cursor="default":console.error("The Konva stage could not be found.")},onMouseDown:i,onTouchEnd:i}),null!=c?c(d,u):null)}}]),n}(o.a.Component),mt=n(69),vt=n.n(mt),pt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"getSubCategory",value:function(e){var t=this.subCategories.find((function(t){return t.name===e}));return t||(t=new n(e),this.subCategories.push(t)),t}},{key:"addContent",value:function(e){if(this.contentChildren.find((function(t){return t.name===e})))console.error("A duplicate of the schema '".concat(e,"' was found."));else{var t=ne.getBaseSchema(e);this.contentChildren.push(t)}}}]),n}((function e(t){Object(s.a)(this,e),this.name=void 0,this.subCategories=void 0,this.contentChildren=void 0,this.name=t,this.subCategories=[],this.contentChildren=[]})),bt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={searchValue:""},a.onSearchChange=a.onSearchChange.bind(Object(f.a)(a)),a.onSearchReset=a.onSearchReset.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.filterSearch("")}},{key:"onSearchChange",value:function(e){var t=e.target.value;this.setState({searchValue:t}),this.props.filterSearch(t)}},{key:"onSearchReset",value:function(){this.setState({searchValue:""}),this.props.filterSearch("")}},{key:"render",value:function(){return o.a.createElement("div",{className:"h-6 flex flex-row w-full"},o.a.createElement("div",{className:"px-2 rounded-l-full bg-gray-100"},o.a.createElement(v.a,{icon:"search",className:"text-sm text-gray-700"})),o.a.createElement("input",{type:"text",value:this.state.searchValue,className:"w-full bg-gray-100 border-none text-sm",onChange:this.onSearchChange}),o.a.createElement("button",{className:"px-2 flex items-center rounded-r-full bg-gray-100",onClick:this.onSearchReset},o.a.createElement(v.a,{icon:"times-circle",className:"text-sm text-gray-700"})))}}]),n}(o.a.Component),gt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={showChildren:!0},a.toggleCategory=a.toggleCategory.bind(Object(f.a)(a)),a.openCategory=a.openCategory.bind(Object(f.a)(a)),a.closeCategory=a.closeCategory.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"toggleCategory",value:function(){this.state.showChildren?this.closeCategory():this.openCategory()}},{key:"openCategory",value:function(){this.setState({showChildren:!0})}},{key:"closeCategory",value:function(){this.setState({showChildren:!1})}},{key:"render",value:function(){var e=this.props,t=e.category,a=e.depth,r=e.onClick,l=this.state.showChildren;return"hidden"===t.name.toLowerCase()?null:o.a.createElement("div",{style:{marginLeft:"".concat("root"===t.name?-1:0,"rem")}},"root"!==t.name&&o.a.createElement("div",{className:"flex flex-row items-center rounded-sm border-b bg-gray-900 hover:bg-gray-800 text-gray-100 cursor-pointer select-none",style:{borderColor:"#111111"},onClick:this.toggleCategory},o.a.createElement("div",{className:"px-2 text-xs"},o.a.createElement(v.a,{icon:"chevron-down",className:"".concat(l?"hidden":"")}),o.a.createElement(v.a,{icon:"chevron-up",className:"".concat(l?"":"hidden")})),o.a.createElement("div",{className:"text-sm"},t.name)),o.a.createElement("div",{className:"".concat(l?"":"hidden"," pl-4 border-l border-dashed border-gray-700")},o.a.createElement("div",{className:""},t.subCategories.map((function(e,t){return o.a.createElement(n,{key:"category-".concat(a,"-").concat(t),category:e,depth:a+1,onClick:r})}))),o.a.createElement("div",{className:""},t.contentChildren.map((function(e,t){return o.a.createElement("div",{key:"child-".concat(a,"-").concat(t),className:"px-2 rounded-sm hover:bg-gray-700 text-gray-100 cursor-pointer select-none",onClick:function(t){t.stopPropagation(),r(e.id)}},e.name)})))))}}]),n}(o.a.Component),yt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={schemaResults:ne.getBaseSchemas()},a.filterSearch=a.filterSearch.bind(Object(f.a)(a)),a.getRootSchemaCategory=a.getRootSchemaCategory.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"filterSearch",value:function(e){var t=ne.getBaseSchemas();t=t.filter((function(t){return(t.name.toLowerCase().includes(e.toLowerCase())||t.id.toLowerCase().includes(e.toLowerCase()))&&!t.id.toLowerCase().includes("hidden")})),this.setState({schemaResults:t})}},{key:"getRootSchemaCategory",value:function(){var e=this.state.schemaResults,t=new pt("root"),n=t;return e.forEach((function(e){var a,o=e.id.split("/");for(a=0;a<o.length-1;a++)n=n.getSubCategory(o[a]);n.addContent(e.id),n=t})),t}},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.x,a=e.y,r=e.addNodeItem,l=this.state.schemaResults,i=this.getRootSchemaCategory();return o.a.createElement("div",{className:"".concat(t?"flex":"hidden"," flex-col absolute rounded bg-gray-900 bg-opacity-90"),style:{top:a,left:n,width:"".concat(Math.min(300,window.innerWidth-n),"px"),height:"".concat(Math.min(250,window.innerHeight-a),"px")}},o.a.createElement("div",{className:"p-3"},o.a.createElement(bt,{filterSearch:this.filterSearch})),o.a.createElement(b.a,{noScrollX:!0},o.a.createElement("div",{className:"pb-4"},o.a.createElement(gt,{category:i,depth:0,onClick:r})),o.a.createElement("div",{className:"".concat(l.length>0?"hidden":"flex"," justify-center mb-2 select-none")},o.a.createElement("div",{className:"text-gray-400 italic"},"No schemas found"))))}}]),n}(o.a.Component),wt=(n(140),n(141),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isModalOpen:!1},a.handleOpenModal=a.handleOpenModal.bind(Object(f.a)(a)),a.handleCloseModal=a.handleCloseModal.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.openModal(this.handleOpenModal)}},{key:"handleOpenModal",value:function(){this.setState({isModalOpen:!0})}},{key:"handleCloseModal",value:function(){this.setState({isModalOpen:!1})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,a=this.state.isModalOpen,r=this.handleCloseModal;return o.a.createElement("div",{className:"".concat(a?"flex":"hidden"," absolute-full items-center justify-center z-30")},o.a.createElement("div",{className:"absolute-full opacity-50 bg-gray-900 cursor-pointer",onClick:this.handleCloseModal}),o.a.createElement("div",{className:"p-4 sm:p-8 w-2/3 lg:w-1/2 bg-gray-100 z-40 rounded shadow-lg"},o.a.createElement("div",{className:"mb-4 flex items-center justify-between text-gray-800"},o.a.createElement("span",{className:"text-lg font-medium"},t),o.a.createElement(v.a,{className:"text-lg sm:text-xl cursor-pointer",icon:"times",onClick:this.handleCloseModal})),o.a.createElement("div",null,null!=n?n(r):null)))}}]),n}(o.a.Component)),St=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={name:"",selectedType:"String",startValue:void 0},a.setStartValue=a.setStartValue.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"setStartValue",value:function(e){var t;switch(this.state.selectedType){case"Number":t=parseInt(e);break;case"Boolean":t="true"===e;break;default:t=e}this.setState({startValue:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.selectedType,r=t.startValue,l=this.props,i=l.onAddVariable,c=l.onCancel;return o.a.createElement("div",{className:"flex flex-col"},o.a.createElement("div",{className:"flex flex-col mb-4"},o.a.createElement("label",{className:"mb-1 text-sm text-gray-700"},"Name"),o.a.createElement("input",{className:"px-2 border-2 rounded",type:"text",name:"title",value:n,onChange:function(t){e.setState({name:t.target.value})}})),o.a.createElement("div",{className:"flex flex-col mb-4"},o.a.createElement("label",{className:"mb-1 text-sm text-gray-700"},"Type"),o.a.createElement("select",{className:"px-1 border-2 rounded text-gray-800",name:"",id:"",value:a,onChange:function(t){e.setState({selectedType:t.target.value})}},o.a.createElement("option",{value:"Number"},"Number"),o.a.createElement("option",{value:"Boolean"},"Boolean"),o.a.createElement("option",{value:"String"},"String"))),o.a.createElement("div",{className:"flex flex-col mb-6"},o.a.createElement("label",{className:"mb-1 text-sm text-gray-700"},"Start Value"),"Number"===a&&o.a.createElement("input",{className:"px-2 border-2 rounded",type:"number",name:"title",value:"".concat(null!==r&&void 0!==r?r:""),onChange:function(t){return e.setStartValue(t.target.value)}})||"Boolean"===a&&o.a.createElement("select",{className:"px-2 border-2 rounded text-gray-800",name:"",id:"",value:"".concat(null!==r&&void 0!==r?r:""),onChange:function(t){return e.setStartValue(t.target.value)}},o.a.createElement("option",{value:""},"Select a value..."),o.a.createElement("option",{value:"true"},"True"),o.a.createElement("option",{value:"false"},"False"))||("String"===a||""===a)&&o.a.createElement("input",{className:"px-2 border-2 rounded",type:"text",name:"title",value:"".concat(null!==r&&void 0!==r?r:""),onChange:function(t){return e.setStartValue(t.target.value)}})),o.a.createElement("div",{className:"flex flex-row-reverse"},o.a.createElement("button",{className:"ml-4 px-2 py-1 rounded bg-blue-600 text-gray-100 hover:bg-blue-500",onClick:function(){n&&a&&r?(i(n,a,r),c()):console.error("The form for creating a variable cannot have empty fields.")}},"Save"),o.a.createElement("button",{className:"px-2 py-1 rounded bg-gray-500 text-gray-100 hover:bg-gray-400",onClick:c},"Cancel")))}}]),n}(o.a.Component);n(142);var Nt=n(144).js_beautify,xt=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).codeResult=void 0,a.selector=void 0,a.codeResult=o.a.createRef(),a.selector=o.a.createRef(),a.state={selectedId:0,editorValue:Nt("return 42;",{indent_size:4}),isCodeOpen:!1,isDragging:!1,isSelecting:!1,selectionLocation:{x:0,y:0},selectedVariable:{id:-1,name:"",type:"",startValue:void 0,value:void 0},screenWidth:window.innerWidth,searchValue:"",variableResults:[],openVariableModal:function(){}},a.setScreenWidth=a.setScreenWidth.bind(Object(f.a)(a)),a.handleRun=a.handleRun.bind(Object(f.a)(a)),a.handleClear=a.handleClear.bind(Object(f.a)(a)),a.handleBeautifyCode=a.handleBeautifyCode.bind(Object(f.a)(a)),a.handleEvaluateNodes=a.handleEvaluateNodes.bind(Object(f.a)(a)),a.openCode=a.openCode.bind(Object(f.a)(a)),a.closeCode=a.closeCode.bind(Object(f.a)(a)),a.toggleCode=a.toggleCode.bind(Object(f.a)(a)),a.onMessageLog=a.onMessageLog.bind(Object(f.a)(a)),a.filterSearch=a.filterSearch.bind(Object(f.a)(a)),a.refreshVariables=a.refreshVariables.bind(Object(f.a)(a)),a.onAddVariable=a.onAddVariable.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.setScreenWidth),Ge.subscribe((function(t){return e.onMessageLog(t)}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setScreenWidth)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.scripletId;this.state.selectedId!==t&&W.selectScriplet(t).then((function(n){e.filterSearch(""),e.handleClear(),e.setState({selectedId:t})}))}},{key:"setScreenWidth",value:function(){this.setState({screenWidth:window.innerWidth})}},{key:"handleRun",value:function(){var e=W.currentScriplet;if(e){e.resetVariables();var t=e.getStart().schema;if(t){var n=t.inputFlowSlots[0];n?(n.evaluateSlot(),Ge.success("Finished running code!")):console.error("The start node is missing the Entry input flow slot.")}else console.error("The start node is missing the schema.")}else console.error("The current scriplet could not be found.")}},{key:"handleClear",value:function(){var e=this.codeResult.current;e?e.innerText="Run code first":console.error("App console could not be found.")}},{key:"handleBeautifyCode",value:function(){this.setState((function(e){return{editorValue:Nt(e.editorValue,{indent_size:4})}}))}},{key:"handleEvaluateNodes",value:function(){}},{key:"openCode",value:function(){this.setState({isCodeOpen:!0})}},{key:"closeCode",value:function(){this.setState({isCodeOpen:!1})}},{key:"toggleCode",value:function(){this.state.isCodeOpen?this.closeCode():this.openCode()}},{key:"onMessageLog",value:function(e){var t=this.codeResult.current;t?"Run code first"===t.innerText?t.innerHTML='<p style="color: '.concat(e.color,'">').concat(e.message,"</p>"):t.innerHTML+='<p style="color: '.concat(e.color,'">').concat(e.message,"</p>"):console.error("App console could not be found.")}},{key:"filterSearch",value:function(e){var t=W.currentScriplet;if(t){var n=t.getVariables();n=n.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||t.type.toLowerCase().includes(e.toLowerCase())||"".concat(t.startValue).toLowerCase().includes(e.toLowerCase())})),this.setState({variableResults:n})}else console.error("The current scriplet could not be found.")}},{key:"refreshVariables",value:function(){this.filterSearch("")}},{key:"onAddVariable",value:function(e,t,n){var a=W.currentScriplet;a?a.addVariable(e,t,n,void 0):console.error("The current scriplet could not be found.")}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.isCodeOpen,r=n.isDragging,l=n.isSelecting,i=n.selectionLocation,c=n.selectedVariable,u=n.screenWidth,s=n.variableResults,d=n.openVariableModal,f=this.props.addNodeItem;return l&&(null===(e=this.selector.current)||void 0===e||e.focus()),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"".concat(a?"code-container":"hidden"," shadow flex flex-row lg:flex-col")},o.a.createElement("div",{className:"flex flex-col p-3 w-1/3 lg:w-full lg:h-2/3 lg:border-b-2 border-gray-900 bg-gray-800"},o.a.createElement(bt,{filterSearch:this.filterSearch}),o.a.createElement("div",{className:"w-full h-full"},o.a.createElement(b.a,{noScrollX:!0,className:"mt-2"},s.map((function(e,n){return o.a.createElement("div",{key:"variable-".concat(n),className:"mb-2 select-none",draggable:!0,onDragStart:function(n){n.stopPropagation(),n.dataTransfer.setData("text/plain","".concat(e.id)),t.setState({isDragging:!0})},onDragEnd:function(){t.setState({isDragging:!1})}},o.a.createElement("div",{className:"flex flex-row items-center px-2 py-1 rounded hover:bg-gray-700 cursor-pointer"},o.a.createElement("div",{className:"flex flex-col w-full mr-2"},o.a.createElement("div",{className:"text-sm text-gray-100"},e.name),o.a.createElement("div",{className:"text-xs text-gray-300"},e.type)),o.a.createElement("div",{className:"px-2 py-2 w-full text-gray-100"},o.a.createElement("div",{className:"px-1 rounded-sm bg-gray-600"},"".concat(e.startValue)))))})),o.a.createElement("div",{className:"".concat(s.length>0?"hidden":"flex"," justify-center mb-2 select-none")},o.a.createElement("div",{className:"p-3 text-gray-400 italic"},"No variables found")),o.a.createElement("div",{className:"w-full mb-1 rounded-md border-gray-600 border-dashed border-2 cursor-pointer hover:bg-gray-900 focus:bg-gray-900 text-gray-500"},o.a.createElement("div",{className:"px-4 py-2",onClick:function(){d()}},o.a.createElement(v.a,{className:"mr-4 text-lg text-gray-600",icon:"plus"}),o.a.createElement("span",{className:"font-medium"},"Add Variable")))))),o.a.createElement("div",{className:"w-2/3 h-full lg:w-full lg:h-1/3 bg-gray-800"},o.a.createElement(b.a,null,o.a.createElement("div",{className:"px-4 py-2 lg:w-auto flex-grow text-gray-100",ref:this.codeResult},"Run code first"))),o.a.createElement("button",{className:"run-code items-center justify-center rounded shadow bg-gray-700 text-gray-200 hover:bg-gray-600 select-none",onClick:this.handleRun},o.a.createElement(v.a,{className:"text-sm",icon:"play"}),"\xa0 Run"),o.a.createElement("button",{className:"clear-code items-center justify-center rounded shadow bg-gray-700 text-gray-200 hover:bg-gray-600 select-none",onClick:this.handleClear},o.a.createElement(v.a,{className:"text-sm",icon:"trash"}),"\xa0 Clear")),o.a.createElement("div",{className:"".concat(a?"hidden":"collapsed-code"," shadow bg-gray-800 items-center lg:justify-center lg:items-start")},o.a.createElement("div",{className:"p-4"},o.a.createElement(v.a,{icon:"code",className:"text-xl text-gray-300"}))),o.a.createElement("button",{className:"".concat(a?"h-56 mb-8 pb-48":"h-16 mb-8 pb-8"," ").concat(u>=1024?"hidden":"code-toggle"," items-center flex-col-reverse rounded-full bg-gray-700"),onClick:this.toggleCode},o.a.createElement("div",{className:"inline-block pb-1"},o.a.createElement(v.a,{icon:"chevron-down",className:"".concat(a?"block":"hidden"," text-gray-300")}),o.a.createElement(v.a,{icon:"chevron-up",className:"".concat(a?"hidden":"block"," text-gray-300")}))),o.a.createElement("button",{className:"".concat(a?"w-64 mr-8 pr-56":"w-16 mr-8 pr-8"," ").concat(u>=1024?"code-toggle":"hidden"," items-center flex-row-reverse rounded-full bg-gray-700"),onClick:this.toggleCode},o.a.createElement("div",{className:"inline-block pr-2"},o.a.createElement(v.a,{icon:"chevron-right",className:"".concat(a?"block":"hidden"," text-gray-300")}),o.a.createElement(v.a,{icon:"chevron-left",className:"".concat(a?"hidden":"block"," text-gray-300")}))),o.a.createElement("div",{className:"".concat(r?"flex":"hidden"," absolute-full justify-center items-center z-10 bg-gray-700 bg-opacity-25"),onDragEnter:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault();var n=e.pageX,a=e.pageY,o=e.dataTransfer.getData("text/plain"),r=W.currentScriplet;if(r){var l=r.getVariable(parseInt(o));l?t.setState({isSelecting:!0,selectionLocation:{x:n,y:a},selectedVariable:l}):console.error("The variable of id '".concat(o,"' could not be found."))}else console.error("The current scriplet could not be found.")}},o.a.createElement("div",{className:"text-xl text-gray-900"},"Drag here...")),o.a.createElement("div",{ref:this.selector,className:"".concat(l?"flex":"hidden"," flex-col rounded bg-gray-700"),style:{position:"absolute",top:"".concat(i.y,"px"),left:"".concat(i.x,"px")},tabIndex:0,onBlur:function(){}},o.a.createElement("div",{className:"px-2 py-1 hover:bg-gray-600 text-gray-100 select-none cursor-pointer",onClick:function(e){e.bubbles=!0,f("Hidden/Getter/".concat(c.type),i.x,i.y,void 0,c.id),t.setState({isSelecting:!1})}},"Get ".concat(c.name)),o.a.createElement("div",{className:"px-2 py-1 hover:bg-gray-600 text-gray-100 select-none cursor-pointer",onClick:function(e){e.stopPropagation(),f("Hidden/Setter/".concat(c.type),i.x,i.y,void 0,c.id),t.setState({isSelecting:!1})}},"Set ".concat(c.name))),o.a.createElement(wt,{title:"Create New Variable",openModal:function(e){d.toString()===function(){}.toString()&&t.setState({openVariableModal:e})}},(function(e){return o.a.createElement(St,{onAddVariable:function(e,n,a){t.onAddVariable(e,n,a),t.refreshVariables()},onCancel:e})})))}}]),n}(o.a.Component),Ot=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).stageContainer=void 0,a.stage=void 0,a.stageContainer=o.a.createRef(),a.stage=o.a.createRef(),a.state={selectedId:0,isDirtyDOM:!1,isReadyToMount:!1,isReady:!1,contextMenu:null,inputElement:null,isContextMenuShown:!1,contextMenuPos:{x:0,y:0}},a.updateDOM=a.updateDOM.bind(Object(f.a)(a)),a.addNodeItem=a.addNodeItem.bind(Object(f.a)(a)),a.deleteNodeItem=a.deleteNodeItem.bind(Object(f.a)(a)),a.handleDragNode=a.handleDragNode.bind(Object(f.a)(a)),a.handleDeleteEdge=a.handleDeleteEdge.bind(Object(f.a)(a)),a.handleDeleteFlowEdge=a.handleDeleteFlowEdge.bind(Object(f.a)(a)),a.handleZoom=a.handleZoom.bind(Object(f.a)(a)),a.handleContextMenu=a.handleContextMenu.bind(Object(f.a)(a)),a.handleCancelContextMenu=a.handleCancelContextMenu.bind(Object(f.a)(a)),a.fitToParent=a.fitToParent.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;W.selectScriplet(this.props.scripletId).then((function(t){t&&e.setState({isReadyToMount:!0})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.fitToParent)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.isReadyToMount){var t;window.addEventListener("resize",this.fitToParent),this.fitToParent();var n=null===(t=this.stage.current)||void 0===t?void 0:t.getStage();if(n)new vt.a("Font Awesome 5 Free").load().then((function(){console.log("Font Awesome 5 has loaded!"),n.draw()}),(function(){console.error("Font Awesome 5 has not loaded!")}));this.setState({isReadyToMount:!1,isReady:!0})}this.state.isDirtyDOM&&this.setState({isDirtyDOM:!1});var a=this.props.scripletId;this.state.selectedId!==a&&W.selectScriplet(a).then((function(t){t&&e.setState({selectedId:a})}))}},{key:"updateDOM",value:function(){this.setState({isDirtyDOM:!0})}},{key:"addNodeItem",value:function(e,t,n,a,o){var r,l=W.currentScriplet;if(l){var i=null===(r=this.stage.current)||void 0===r?void 0:r.getStage();if(i){var c=i.getPointerPosition();c?(c.x=((null!==t&&void 0!==t?t:c.x)-i.x())/i.scaleX(),c.y=((null!==n&&void 0!==n?n:c.y)-i.y())/i.scaleY(),l.addNode(c.x,c.y,e,[],[],[],new Map,[],a,o),this.handleCancelContextMenu(),this.updateDOM()):console.error("The Konva pointer position could not be found.")}else console.error("The konva stage could not be found.")}else console.error("The current scriplet of id '".concat(this.props.scripletId,"' could not be found."))}},{key:"deleteNodeItem",value:function(e){var t=W.currentScriplet;if(t){var n=t.getNode(e);if(n){var a=n.schema;a?a.isDeletable?H.deleteAllConnections(e)&&(t.deleteNode(e),this.updateDOM()):console.error("This schema cannot be deleted."):console.error("The schema of node item '".concat(e,"' could not be found."))}else console.error("The node item of id '".concat(e,"' could not be found."))}else console.error("The current scriplet of id '".concat(this.props.scripletId,"' could not be found."))}},{key:"handleDragNode",value:function(e,t,n){var a=W.currentScriplet;if(a){var o=a.getNode(e);o?(o.x=t,o.y=n,a.items.set(e,o),this.updateDOM()):console.error("The node of id '".concat(e,"' could not be found."))}else console.error("The current scriplet of id '".concat(this.props.scripletId,"' could not be found."))}},{key:"handleDeleteEdge",value:function(e,t,n,a){H.deleteConnection(e,t,n,a),this.updateDOM()}},{key:"handleDeleteFlowEdge",value:function(e,t,n,a){H.deleteFlowConnection(e,t,n,a),this.updateDOM()}},{key:"handleZoom",value:function(e){e.evt.preventDefault();var t=e.target.getStage();if(t){var n=t.scaleX(),a=t.getPointerPosition();if(a){var o=(a.x-t.x())/n,r=(a.y-t.y())/n,l=e.evt.deltaY<0?1.1*n:n/1.1;t.scale({x:l,y:l});var i={x:a.x-o*l,y:a.y-r*l};t.position(i),t.batchDraw()}else console.error("The Konva pointer position could not be found.")}else console.error("The Konva Stage could not be found.")}},{key:"handleContextMenu",value:function(e){if("Stage"===e.target.getType()){var t=e.target.getStage();e.target.getChildren((function(e){return"context-menu-layer"===e.getAttr("data-name")}))[0]&&t?this.setState({isContextMenuShown:!0,contextMenuPos:{x:e.evt.pageX,y:e.evt.pageY}}):console.error("Either the Konva layer or Konva stage could not be found.")}}},{key:"handleCancelContextMenu",value:function(){this.setState({isContextMenuShown:!1})}},{key:"fitToParent",value:function(){var e=this.stageContainer.current,t=this.stage.current;if(e&&t){var n=t.getStage();n.width(e.offsetWidth),n.height(e.offsetHeight),n.draw()}else console.error("Either the referenced container or referenced stage could not be found.")}},{key:"render",value:function(){var e=this,t=this.state,n=t.isReadyToMount,a=t.isReady,r=t.isContextMenuShown,l=t.contextMenuPos;if(!n&&!a)return null;var i=W.currentScriplet;return i?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:this.stageContainer,className:"main"},o.a.createElement(ft.c,{ref:this.stage,className:"bg-gray-200",onWheel:function(t){e.handleZoom(t),e.handleCancelContextMenu(),_e.cancel()},onContextMenu:function(t){t.evt.preventDefault(),t.cancelBubble=!0,e.handleContextMenu(t)},onClick:function(t){e.handleCancelContextMenu(),_e.cancel()},onDragStart:function(t){e.handleCancelContextMenu(),_e.cancel()},draggable:!0},o.a.createElement(ft.a,{id:"edges-layer"}),o.a.createElement(Ye.Layer,null,Object(te.a)(i.getNodes()).map((function(t){var n=t.schema;if(!n)return console.error("The schema for node item '".concat(t.id,"' could not be found.")),null;var a=H.getInputConnections(t.id),r=H.getInputFlowConnections(t.id);return o.a.createElement(Ye.Group,{key:"node-".concat(t.id)},a.map((function(n){if(!n)return null;var a=i.getNode(n.itemId);if(!a)return console.error("The node item of id '".concat(n.itemId,"' could not be found.")),null;var r=a.schema;return r?o.a.createElement(ft.b,{key:"edge-".concat(t.id,"-").concat(n.id,"-").concat(n.itemId,"-").concat(n.slotId),containerId:"edges-layer"},o.a.createElement(ht,{startPos:{x:a.x,y:a.y+40*n.slotId+30},endPos:{x:t.x,y:t.y+40*n.id+30},nodeWidthOther:r.width,nodeHeight:40,handleOnClick:function(){return e.handleDeleteEdge(t.id,n.id,n.itemId,n.slotId)}},(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ye.Rect,{visible:t,x:e.x-12,y:e.y-10,width:24,height:16,fill:ae.Gray[800],listening:!1}),o.a.createElement(Ye.Text,{visible:t,x:e.x-12,y:e.y-10,width:24,height:19,text:"\xd7",fontStyle:"bold",fontSize:20,align:"center",verticalAlign:"middle",fill:ae.Gray[100],listening:!1}))}))):(console.error("The schema for node item '".concat(a.id,"' could not be found.")),null)})),r.map((function(n){if(!n)return null;var a=i.getNode(n.itemId);if(!a)return console.error("The item of id '".concat(n.itemId,"' could not be found.")),null;var r=a.schema;return r?o.a.createElement(ft.b,{key:"edge-flow-".concat(t.id,"-").concat(n.id,"-").concat(n.itemId,"-").concat(n.slotId),containerId:"edges-layer"},o.a.createElement(ht,{startPos:{x:a.x,y:a.y+40*n.slotId+30},endPos:{x:t.x,y:t.y+40*n.id+30},nodeWidthOther:r.width,nodeHeight:40,handleOnClick:function(){return e.handleDeleteFlowEdge(t.id,n.id,n.itemId,n.slotId)}},(function(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ye.Rect,{visible:t,x:e.x-12,y:e.y-10,width:24,height:16,fill:ae.Gray[800],listening:!1}),o.a.createElement(Ye.Text,{visible:t,x:e.x-12,y:e.y-10,width:24,height:19,text:"\xd7",fontStyle:"bold",fontSize:20,align:"center",verticalAlign:"middle",fill:ae.Gray[100],listening:!1}))}))):(console.error("The schema for node item '".concat(a.id,"' could not be found.")),null)})),o.a.createElement(dt,{item:t,width:n.width,rowHeight:40,topBarHeight:30,handleDragNode:e.handleDragNode,deleteNodeItem:e.deleteNodeItem,updateDOM:e.updateDOM}))}))),o.a.createElement(Ye.Layer,{"data-name":"context-menu-layer"})),o.a.createElement(yt,{isVisible:r,x:l.x,y:l.y,addNodeItem:this.addNodeItem})),o.a.createElement(xt,{scripletId:this.props.scripletId,addNodeItem:this.addNodeItem})):(console.error("The current scriplet of id '".concat(this.props.scripletId,"' could not be found.")),null)}}]),n}(o.a.Component);function Ct(e){var t=e.children,n=Object(u.f)().scripletId;return o.a.createElement(o.a.Fragment,null,null!=t?t(parseInt(n)):null)}i.b.add(c.a);var Et=function(){return o.a.createElement("div",{className:"flex flex-col lg:flex-row"},o.a.createElement(Qe,null),o.a.createElement("main",null,o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/scriplet/:scripletId"},o.a.createElement(Ct,null,(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ot,{scripletId:e}))}))),o.a.createElement(u.a,{path:"/"},o.a.createElement("div",{className:"p-6 flex justify-center items-center h-screen w-screen"},o.a.createElement("h1",{className:"text-xl text-gray-600"},"Please select a scriplet first."))))))},jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function It(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(p.a,{basename:"/vso"},o.a.createElement(Et,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/vso",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/vso","/service-worker.js");jt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):It(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):It(t,e)}))}}()},71:function(e,t,n){e.exports=n(146)},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.f0f080c6.chunk.js.map